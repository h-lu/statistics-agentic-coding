# Week 12 锚点（ANCHORS.yml）
#
# 本文件记录本章的核心知识锚点，用于验证和教学引用。
# 格式：YAML列表，每个锚点包含id、claim、evidence、verification字段

- id: week_12_feature_importance_to_shap
  claim: "特征重要性只能回答'整体上哪些特征重要'，无法解释单个预测"
  evidence: "Week 11 学习的基于不纯度的重要性是全局指标，对所有样本适用，不能给出针对单个样本的解释"
  verification: "对比Week 11的特征重要性与SHAP的局部解释：特征重要性衡量整体影响，SHAP值量化每个特征对特定预测的贡献"

- id: week_12_shap_interpretability
  claim: "SHAP值具有可加性和满足效率公理，每个特征的贡献之和等于预测值与基准值之差"
  evidence: "Shapley值的定义：每个特征按照其对所有可能特征组合的边际贡献分配收益"
  verification: "SHAP库的summary_plot显示所有特征的重要性排序，force_plot显示单个样本的特征贡献路径"

- id: week_12_data_bias_source
  claim: "历史数据中的歧视模式会被模型'学习'并在预测中放大"
  evidence: "Week 03学习的MNAR/MAR缺失机制：如果某种群体在训练数据中系统性缺失，会导致样本偏差"
  verification: "检查不同群体在训练数据中的代表性差异"

- id: week_12_proxy_variable_detection
  claim: "代理变量是与敏感属性高度相关的特征，可能泄露敏感信息"
  evidence: "邮政编码与种族高度相关、护士职业与性别相关的经典案例"
  verification: "通过相关性分析识别潜在代理变量，在SHAP依赖图中检查代理变量对敏感属性的依赖"

- id: week_12_disparate_impact_threshold
  claim: "美国EEOC的'80%规则'认为差异影响比<0.8可能存在歧视"
  evidence: "EEOC执法指南将差异影响比<0.8作为潜在歧视的信号"
  verification: "计算不同群体（如性别、种族）的通过率，计算差异影响比=少数群体通过率/多数群体通过率"

- id: week_12_equal_opportunity_definition
  claim: "平等机会要求不同群体的召回率（TPR）相等"
  evidence: "Week 10学习的混淆矩阵：TPR = TP/(TP+FN)，即真正为正类的样本被正确识别的比例"
  verification: "分别计算每个群体的TPR，检查差异是否在可接受范围内（如5%）"

- id: week_12_equalized_odds_definition
  claim: "均等几率要求不同群体的TPR和FPR都相等，是最强的公平性定义"
  evidence: "FPR = FP/(FP+TN)，即假阳性率；均等几率意味着TPR_minority_FPR_minority = TPR_majority_FPR_majority"
  verification: "分别计算各群体的TPR和FPR，检查是否均等"

- id: week_12_differential_privacy_epsilon
  claim: "ε是隐私预算参数，控制隐私-效用权衡：ε越小隐私越强但数据实用性越低"
  evidence: "SmartNoise SDK的Privacy(epsilon=1.0)参数设置：ε=1.0提供较强隐私保护"
  verification: "通过调整ε值观察模型输出的噪声水平和预测准确率的trade-off"

- id: week_12_ethics_checklist
  claim: "上线前必须进行伦理审查：数据偏见、算法偏见、代理变量、公平性、隐私、可复现性、结论边界"
  evidence: "EU AI Act高风险系统要求、GDPR解释权、公司AI问责空白"
  verification: "使用checklist逐项审查，记录每项的发现和缓解措施"

- id: week_12_explain_to_non_technical
  claim: "解释模型结论时必须使用非技术语言，避免术语，重点说明预测、不确定性、影响和限制"
  evidence: "产品经理、客户、合规人员三类受众的不同解释需求"
  verification: "准备三个版本的解释：一句话版、详细版、技术附录版"

- id: week_12_shap_not_causal
  claim: "SHAP值反映的是相关性，不是因果性；特征贡献不等于该特征的因果效应"
  evidence: "Week 13将学习的因果推断：相关不等于因果，需要DAG和干预来识别因果效应"
  verification: "在解释中明确说明SHAP显示的是'特征对预测的贡献'，不宣称'改变X会导致Y'"

- id: week_12_fairness_performance_tradeoff
  claim: "消除偏见通常会降低模型整体性能，需要权衡公平性与准确率"
  evidence: "删除敏感特征或重新平衡数据可能降低AUC，但提高社会接受度"
  verification: "报告不同公平性干预下的性能指标变化，讨论trade-off的合理性"
