# Week 12 作业评分标准

## 评分总览

| 层级 | 分值范围 | 核心要求 |
|------|---------|---------|
| **基础层** | 0-60 分 | SHAP 值计算、分组公平性评估、业务语言翻译 |
| **进阶层** | 0-30 分 | 完整可解释性报告、公平性-准确性权衡分析 |
| **挑战层** | 0-10 分 | 模型卡片、执行摘要 |
| **总计** | 0-100 分 | 满分 100 分（挑战层为加分项） |

---

## 基础层评分（60 分）

### 任务 1：从特征重要性到 SHAP 值（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确计算特征重要性 | 5 分 | 5 分：使用 feature_importances_ 或 permutation_importance |
| 正确使用 SHAP 库 | 8 分 | 4 分：正确初始化 Explainer<br>4 分：正确计算 shap_values |
| 解释单样本预测 | 4 分 | 4 分：使用 force_plot 或 waterfall_plot 解释单个样本 |
| 全局 vs 局部可解释性分析 | 3 分 | 3 分：用自己的话解释两者区别 |

**扣分项**：
- 只计算特征重要性，没有 SHAP 值：-8 分
- SHAP 代码有错误但能运行：-4 分
- 没有解释全局 vs 局部区别：-3 分
- 代码无法运行：-10 分

---

### 任务 2：解读 SHAP 汇总图（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确绘制 SHAP 汇总图 | 5 分 | 5 分：使用 summary_plot 且图清晰可读 |
| 正确解读特征重要性 | 5 分 | 3 分：通过点分布宽度识别重要特征<br>2 分：排序正确 |
| 正确解读方向（红色 vs 蓝色） | 3 分 | 3 分：理解颜色代表特征值高低、位置代表影响方向 |
| 给出自己的观察或反直觉发现 | 2 分 | 2 分：有自己的观察，不只是复制图表 |

**扣分项**：
- 没有绘制汇总图：-5 分
- 只说"图长这样"，没有解读：-8 分
- 误读了颜色或方向：-3 分

---

### 任务 3：检测模型偏见（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确实现分组评估函数 | 6 分 | 3 分：函数逻辑正确<br>3 分：计算了 TPR, FPR 等指标 |
| 计算组间差异 | 4 分 | 4 分：计算了关键指标的组间差异 |
| 公平性分析合理 | 5 分 | 3 分：基于数据分析公平性<br>2 分：考虑了样本量和真实风险 |

**扣分项**：
- 只看整体指标，没有分组：-10 分
- 只输出数字，没有分析：-5 分
- 误判断公平性（如只看准确率）：-3 分

---

### 任务 4：向非技术读者解释（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 统计术语翻译正确 | 4 分 | 1 分/术语，共 4 个术语 |
| 使用业务语言 | 3 分 | 3 分：避免技术黑话，用易懂的语言 |
| 包含具体行动建议 | 2 分 | 2 分：给出了可操作的建议 |
| 语言简洁、易懂 | 1 分 | 1 分：篇幅适中，不冗长 |

**扣分项**：
- 直接复制技术术语：-5 分
- 没有行动建议：-2 分
- 语言过于冗长或过于简略：-1 分

---

## 进阶层评分（30 分）

### 任务 5：完整的可解释性报告（18 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 报告结构完整 | 6 分 | 2 分/部分，共 3 个核心部分（性能、可解释性、公平性） |
| 使用业务语言 | 4 分 | 4 分：非技术读者能看懂核心结论 |
| 包含图表和可视化 | 4 分 | 2 分：有 SHAP 图<br>2 分：图表有说明 |
| 伦理风险清单合理 | 4 分 | 2 分：风险识别准确<br>2 分：缓解措施可行 |

**加分项**：
- 包含了模型边界说明：+2 分
- 包含了维护计划：+2 分
- 报告格式专业、美观：+2 分

**扣分项**：
- 报告结构不完整：-6 分
- 全是技术术语，业务方看不懂：-5 分
- 没有图表或图表没有说明：-4 分

---

### 任务 6：公平性-准确性权衡分析（12 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 实现权衡分析 | 5 分 | 3 分：代码逻辑正确<br>2 分：计算了多种配置下的指标 |
| 给出明确权衡结论 | 4 分 | 4 分：量化了权衡（如"牺牲 X% 准确率换取 Y% 公平性"） |
| 用业务语言解释权衡 | 3 分 | 3 分：解释了权衡的业务含义 |

**加分项**：
- 尝试了偏见缓解策略：+3 分
- 绘制了权衡曲线图：+2 分

**扣分项**：
- 只分析了一个配置，没有"权衡"：-5 分
- 没有量化权衡，只说"有差异"：-3 分
- 没有业务含义解释：-2 分

---

## 挑战层评分（10 分 + 加分）

### 任务 7：综合项目——模型卡片（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 模型卡片结构完整 | 4 分 | 1 分/部分，共 4 个核心部分 |
| 执行摘要质量 | 3 分 | 1 分：简洁<br>1 分：易懂<br>1 分：包含关键信息 |
| 代码可复现 | 2 分 | 2 分：能从头生成模型卡片 |
| 整体专业性 | 1 分 | 1 分：格式专业、内容全面 |

**加分项**：
- 包含了版本控制信息：+2 分
- 包含了对比基线的结果：+2 分
- 执行摘要适合高管阅读：+2 分

---

## AI 协作练习（可选，额外 2-5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 审查清单完成 | 2 分 | 2 分：勾选了 AI 生成内容中的问题 |
| 修订版质量 | 3 分 | 3 分：修订版准确、完整，修正了识别出的问题 |

---

## 评分维度说明

### 1. 代码正确性（30%）
- 代码可以运行，无语法错误
- 使用正确的 API（SHAP、sklearn.metrics）
- 输出结果正确

### 2. 概念理解（30%）
- 理解全局 vs 局部可解释性
- 理解 SHAP 值的含义（正负、大小）
- 理解公平性指标（TPR、FPR、准确率的差异）
- 理解公平性-准确性的权衡

### 3. 分析与表达（25%）
- 正确解读 SHAP 图表
- 正确解读分组公平性结果
- 用业务语言向非技术读者解释
- 给出合理的行动建议

### 4. 伦理意识（15%）
- 识别模型偏见
- 评估伦理风险
- 提出缓解措施

---

## 常见错误与扣分标准

| 错误类型 | 扣分 | 说明 |
|---------|------|------|
| 混淆特征重要性和 SHAP 值 | -3 分 | 特征重要性是全局的，SHAP 是局部的 |
| 认为准确率相同就是公平 | -5 分 | 需要看 TPR、FPR 的分组差异 |
| SHAP 图没有解读 | -3 分 | 只画图不解释等于没做 |
| 向非技术读者使用技术术语 | -3 分 | AUC、SHAP、p 值需要翻译 |
| 没有考虑样本量 | -2 分 | 样本太少的分组结论不可靠 |
| 认为有"完美公平"的模型 | -2 分 | 公平性是权衡，不是二选一 |
| 代码无法运行 | -10 分 | 需确保代码可运行或注明伪代码 |
| 只给代码没有分析 | -20% | 分析和代码同等重要 |

---

## 优秀作业示例特征

一份优秀的作业应该：

1. **代码部分**：
   - 代码结构清晰，有适当注释
   - 正确使用 SHAP 库（TreeExplainer）
   - 分组评估函数健壮（处理小样本）
   - 输出结果格式化，易于阅读

2. **分析部分**：
   - 正确解读了 SHAP 汇总图（重要性和方向）
   - 识别了分组公平性问题
   - 量化了公平性-准确性权衡
   - 用自己的话解释（不是复制粘贴）

3. **非技术沟通**：
   - 把 AUC 翻译成"区分能力"
   - 把 SHAP 值翻译成"风险来源"
   - 把 TPR/FPR 翻译成"抓到率/误判率"
   - 给出具体行动建议

4. **伦理意识**：
   - 识别了模型偏见
   - 提出了缓解措施
   - 说明了模型边界
   - 有维护计划

5. **报告格式**：
   - Markdown 格式清晰
   - 表格和图表标注完整
   - 结论有数据支撑
   - 适合目标读者阅读

---

## 反馈建议模板

在给作业反馈时，可以使用以下模板：

```
【优点】
- （具体表扬，如：正确解读了 SHAP 汇总图，公平性分析完整）

【待改进】
- （具体问题，如：向非技术读者解释时使用了太多技术术语）
- （具体建议，如：建议把"AUC 0.89"翻译成"模型区分能力很强"）

【总分】X/100
```

---

## 测试与验证

作业中的关键检查点应该能被 `tests/` 目录中的测试覆盖：

- `test_feature_importance()`：验证特征重要性计算
- `test_shap_values()`：验证 SHAP 值计算
- `test_fairness_evaluation()`：验证分组公平性评估
- `test_tradeoff_analysis()`：验证权衡分析逻辑

评分时可以运行这些测试来验证代码正确性。

---

## 最后提醒

评分的目的是帮助学生学习，而不仅仅是打分。在评分时：
1. 指出具体的错误和改进方向
2. 鼓励学生用自己的话解释概念
3. 认可学生对伦理和公平性的思考

记住 Week 12 的核心目标：**理解模型可解释性的层次（全局 vs 局部），学会检测和评估模型偏见，能够用业务语言向非技术读者解释模型结论，理解公平性是权衡而不是二选一。**

特别提醒：本周的"非技术沟通"和"伦理意识"是新引入的评分维度，与传统的技术正确性同等重要。模型能预测只是第一步，模型能解释、能负责才是部署的前提。
