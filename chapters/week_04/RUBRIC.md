# Week 04 作业评分标准

## 总分结构

| 题目类型 | 分值 | 说明 |
|---------|------|------|
| 基础题（必做） | 80 | 1-3 题，每题 20-30 分 |
| 进阶题（选做） | 20 | 4-5 题，每题 10-20 分 |
| 挑战题（加分） | 30 | 第 6 题，按评分点分配 |
| AI 协作练习（可选） | 10 | 审查报告质量 |

**总分上限**：140 分

---

## 基础题评分（80 分）

### 1. 相关分析练习（30 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| Pearson 矩阵正确性 | 8 | 代码可运行，矩阵计算正确 |
| 最强相关识别 | 6 | 正确找出相关性最高的两对变量 |
| Spearman 计算 | 6 | 正确计算 Spearman 相关系数 |
| 差异解释 | 10 | 合理解释 Pearson vs Spearman 的差异，结合散点图或分布特征 |

**扣分项**：
- 只计算相关系数，不解释含义（-5）
- 没有比较两种相关系数（-5）
- 代码无法运行（-10）

**示例评分**：
- **满分（30）**：完成所有计算，解释清晰，有散点图支持
- **24 分**：计算正确，但解释不够深入
- **18 分**：只完成计算，几乎没有解释
- **0 分**：代码无法运行或未提交

---

### 2. 分组比较练习（30 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 分组统计正确性 | 10 | 代码正确计算各组的均值、中位数、标准差、复购率 |
| 可视化质量 | 8 | 箱线图清晰，有标题和轴标签 |
| 观察质量 | 12 | 每条观察都有数据支撑，有解释（不是简单重复数字） |

**扣分项**：
- 只报数字，没有观察（-8）
- 箱线图缺少标题或标签（-3）
- 混淆均值和中位数（-3）

**示例评分**：
- **满分（30）**：统计正确，图表规范，观察深入
- **24 分**：统计正确，但观察不够具体
- **18 分**：只完成统计，图表或观察缺失
- **0 分**：代码无法运行或未提交

---

### 3. 可视化练习（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 散点图矩阵 | 7 | 图表完整，变量选择合理 |
| 相关热力图 | 7 | 使用正确颜色映射，有数值标注 |
| 对比分析 | 6 | 有意义的图表对比，指出热力图遗漏的模式 |

**扣分项**：
- 图表没有标题或轴标签（-3）
- 热力图没有数值标注（-2）
- 没有对比两张图（-5）

**示例评分**：
- **满分（20）**：图表规范，对比分析深入
- **16 分**：图表完整，但对比分析简单
- **12 分**：只有图表，没有对比
- **0 分**：代码无法运行或未提交

---

## 进阶题评分（20 分）

### 4. 多数据集对比分析（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 对比分析 | 5 | 正确找出相关系数变化最大的变量对 |
| 假设质量 | 5 | 假设有业务逻辑支持，不是凭空猜测 |

### 5. 时间序列分解（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 可视化 | 4 | 日数据和周聚合数据都画出 |
| 模式识别 | 3 | 正确识别趋势和季节性 |
| 假设生成 | 3 | 假设可检验，与观察一致 |

---

## 挑战题评分（30 分）

### 6. 从 EDA 到假设清单（30 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 假设有数据支撑 | 10 | 每个假设都有明确的 EDA 观察和数字 |
| 假设可检验 | 8 | 每个假设都指明检验方法（Week 06-08 的方法） |
| 解释有业务逻辑 | 7 | 不是"猜测"，而是基于业务知识的解释 |
| 优先级排序合理 | 5 | 高优先级假设确实更重要/更影响决策 |

**扣分项**：
- 假设没有数据支撑（-5）
- 假设不可检验（-5）
- 假设只是重复观察，没有解释（-3）
- 优先级排序不合理（-3）

**示例评分**：
- **满分（30）**：5+ 个假设，每个都满足所有标准
- **24 分**：假设质量好，但数量不足（3-4 个）
- **18 分**：假设存在明显缺陷（如不可检验）
- **0 分**：未完成或没有假设

---

## AI 协作练习评分（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 问题识别 | 4 | 至少指出 2 个 AI 结论中的问题 |
| 改进质量 | 3 | 改进后的结论更严谨、更可复现 |
| 学习反思 | 3 | 有对 AI 局限性的思考，不是简单吐槽 |

**扣分项**：
- 只验证数字，没有审查结论（-3）
- 没有改进版本（-2）
- 没有学习反思（-2）

**示例评分**：
- **满分（10）**：问题识别准确，改进合理，反思深入
- **7 分**：识别了问题，但改进或反思不够
- **4 分**：只完成了部分审查
- **0 分**：未完成或直接复制 AI 输出

---

## 通用评分标准

### 代码质量（-2 分/项，最多 -10 分）

| 问题 | 扣分 |
|------|------|
| 代码无法运行 | -10 |
| 变量命名混乱 | -2 |
| 没有注释或文档 | -2 |
| 硬编码路径 | -2 |
| 没有使用函数封装 | -2 |

### 报告质量（-3 分/项，最多 -15 分）

| 问题 | 扣分 |
|------|------|
| 结构混乱，难以阅读 | -5 |
| 只粘贴代码输出，没有解释 | -5 |
| 图表没有标题或说明 | -3 |
| 缺少关键观察 | -5 |
| 语言表达不清 | -3 |

---

## 等级划分

| 总分范围 | 等级 | 描述 |
|----------|------|------|
| 90+ | A | 优秀：完成基础题，高质量完成进阶或挑战题 |
| 80-89 | A- | 良好：完成基础题，有一定进阶 |
| 70-79 | B+ | 中上：完成基础题，质量尚可 |
| 60-69 | B | 及格：完成基础题，但质量一般 |
| < 60 | C | 不及格：基础题未完成或有严重错误 |

---

## 测试支持

以下是评分时会运行的测试用例（伪代码）：

```python
# 测试 1：相关分析
def test_correlation_calculation():
    corr = student_solution.calculate_pearson(data)
    assert corr.shape == (4, 4)  # 四个变量
    assert np.isclose(corr.loc['age', 'purchase_amount'], expected_value, atol=0.1)

# 测试 2：分组比较
def test_group_comparison():
    grouped = student_solution.group_by_source(data)
    assert 'search' in grouped.index
    assert grouped.loc['search', 'mean'] > grouped.loc['social', 'mean']

# 测试 3：可视化
def test_visualization():
    assert Path('output/scatter_matrix.png').exists()
    assert Path('output/heatmap.png').exists()

# 测试 4：假设清单
def test_hypothesis_list():
    hypotheses = student_solution.generate_hypotheses(data)
    assert len(hypotheses) >= 5  # 挑战题要求
    assert all('observation' in h for h in hypotheses)
    assert all('test_method' in h for h in hypotheses)
```

---

## 评分流程

1. **代码运行**：先运行测试，确保代码可执行
2. **报告阅读**：阅读 `report.md`，检查观察和解释
3. **图表检查**：打开生成的图表，检查质量和标注
4. **加分项**：检查进阶题、挑战题、AI 练习
5. **扣分项**：检查代码和报告质量问题
6. **总分计算**：各项相加，确定等级

---

## 反馈模板（评分后提供）

```markdown
## 评分反馈

**总分**：XX / 140（等级：X）

### 做得好的地方
- [具体表扬]

### 需要改进的地方
- [具体问题]（扣分：XX）

### 建议
- [学习建议]
```
