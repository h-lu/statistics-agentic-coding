# Week 15 评分标准

## 评分维度

| 维度 | 分值 | 说明 |
|------|------|------|
| **代码质量** | 30 分 | 可运行、结构清晰、注释充分、固定随机种子 |
| **统计理解** | 30 分 | 概念准确、理解降维与聚类的区别与联系、能解释主成分含义 |
| **可复现性** | 20 分 | 随机种子固定、依赖明确、结果可重现 |
| **报告质量** | 20 分 | 结构清晰、降维/聚类结果可解释、边界明确 |

**总分**：100 分（基础作业 85 分 + 进阶作业 15 分）

---

## 具体评分细则

### 习题 1：维度灾难与距离度量（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **距离验证** | 5 分 | ✅ 正确实现距离计算函数<br>✅ 对比不同维度下的平均距离<br>✅ 观察"距离趋于接近"的现象<br>⚠️ 部分错误：2-4 分<br>❌ 完全错误：0 分 |
| **现象解释** | 5 分 | ✅ 准确解释"距离失效"现象<br>✅ 说明高维空间为何所有点对距离趋于接近<br>✅ 连接到 KNN/聚类的局限性<br>⚠️ 解释不准确：2-4 分<br>❌ 没有解释：0 分 |

**常见错误与扣分**：
- ❌ 没有固定随机种子：-2 分
- ❌ 混淆"平均距离增大"和"距离方差变小"：-3 分
- ❌ 没有连接到实际应用（KNN/聚类）：-2 分

---

### 习题 2：PCA 降维与主成分解释（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **PCA 实现** | 8 分 | ✅ 正确使用 sklearn 的 PCA<br>✅ 标准化数据（StandardScaler）<br>✅ 计算累积方差解释比例<br>⚠️ 部分错误：4-7 分<br>❌ 完全错误：0 分 |
| **主成分数量选择** | 4 分 | ✅ 根据方差阈值（如 85%）选择成分数<br>✅ 解释压缩率<br>✅ 可视化方差解释曲线<br>⚠️ 没有解释：1-2 分<br>❌ 随意选择：0 分 |
| **主成分解释** | 8 分 | ✅ 查看特征载荷（loading）<br>✅ 用业务语言解释主成分（如"活跃度"）<br>✅ 至少解释前 3 个主成分<br>⚠️ 只列出数字无解释：3-5 分<br>❌ 没有解释：0 分 |

**常见错误与扣分**：
- ❌ 没有标准化数据：-3 分（PCA 对尺度敏感）
- ❌ 没有固定随机种子：-2 分
- ❌ 只说"PC1 解释方差 35%"，没有业务解释：-4 分
- ❌ 混淆"特征选择"和"特征提取"：-2 分

---

### 习题 3：K-means 聚类与 K 值选择（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **K-means 实现** | 7 分 | ✅ 正确使用 sklearn 的 KMeans<br>✅ 在降维后的数据上运行<br>✅ 固定随机种子<br>⚠️ 部分错误：3-6 分<br>❌ 完全错误：0 分 |
| **K 值选择** | 7 分 | ✅ 使用肘部法则（WCSS 曲线）<br>✅ 计算轮廓系数（silhouette_score）<br>✅ 结合两种方法选择 K 值<br>⚠️ 只用一种方法：3-5 分<br>❌ 随意选择：0 分 |
| **簇解释** | 6 分 | ✅ 计算各簇的统计摘要（均值、中位数）<br>✅ 用业务语言描述每个簇（如"高价值型"）<br>✅ 至少解释 3 个簇<br>⚠️ 只列数字：2-4 分<br>❌ 没有解释：0 分 |

**常见错误与扣分**：
- ❌ 没有固定随机种子：-2 分（K-means 结果不稳定）
- ❌ 在原始高维数据上跑 K-means（没有先降维）：-3 分
- ❌ 只看 WCSS，不考虑业务解释性：-3 分
- ❌ 簇解释与实际数据矛盾：-3 分

---

### 习题 4：流式统计算法实现（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **在线均值实现** | 5 分 | ✅ 正确实现 OnlineMean 类<br>✅ 维护状态变量（n, sum）<br>✅ 验证与批量结果一致<br>⚠️ 部分错误：2-4 分<br>❌ 完全错误：0 分 |
| **在线方差实现** | 10 分 | ✅ 正确实现 Welford's Algorithm<br>✅ 维护状态变量（n, mean, M2）<br>✅ 更新公式正确（delta, delta2）<br>✅ 验证与批量结果一致<br>⚠️ 部分错误：4-8 分<br>❌ 完全错误：0 分 |
| **复杂度分析** | 5 分 | ✅ 说明流式统计的 O(1) 复杂度<br>✅ 对比批量统计的 O(n) 复杂度<br>✅ 连接到实时系统的需求<br>⚠️ 分析不准确：2-3 分<br>❌ 没有分析：0 分 |

**常见错误与扣分**：
- ❌ 在线方差实现错误（没有用 Welford 算法）：-5 分
- ❌ 没有验证流式与批量结果一致：-3 分
- ❌ 混淆"批量统计"和"流式统计"：-3 分
- ❌ 没有分析复杂度：-2 分

---

### 习题 5：A/B 测试工程化（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **平台实现** | 10 分 | ✅ 实现 ABTestPlatform 类<br>✅ 包含配置、数据收集、检验、决策<br>✅ SRM 检测（样本比例检查）<br>✅ 固定随机种子<br>⚠️ 部分实现：5-8 分<br>❌ 完全错误：0 分 |
| **决策规则** | 5 分 | ✅ 决策规则合理（p < 0.05 → launch_B）<br>✅ 考虑效应量阈值<br>✅ 边界情况处理（continue）<br>⚠️ 规则不合理：2-3 分<br>❌ 没有规则：0 分 |
| **陷阱识别** | 5 分 | ✅ 识别 SRM（样本比例异常）<br>✅ 识别早期停止问题<br>✅ 说明 human-in-the-loop 的必要性<br>⚠️ 只识别 1 个：2-3 分<br>❌ 没有识别：0 分 |

**常见错误与扣分**：
- ❌ 没有实现 SRM 检测：-3 分
- ❌ 决策规则不考虑效应量：-2 分
- ❌ 没有说明自动化的陷阱：-3 分
- ❌ 完全自动化决策，没有 human-in-the-loop：-3 分

---

### 习题 6：StatLab 计算专题升级（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **降维集成** | 4 分 | ✅ 在 StatLab 中实现 PCA 降维<br>✅ 解释压缩率和保留方差<br>✅ 解释主成分的业务含义<br>⚠️ 没有解释：1-2 分<br>❌ 没有实现：0 分 |
| **聚类集成** | 4 分 | ✅ 在降维后运行 K-means<br>✅ 选择合理的 K 值<br>✅ 生成用户分层画像<br>⚠️ 没有解释：1-2 分<br>❌ 没有实现：0 分 |
| **流式统计集成** | 3 分 | ✅ 实现流式统计更新<br>✅ 支持 O(1) 增量更新<br>⚠️ 部分实现：1-2 分<br>❌ 没有实现：0 分 |
| **报告章节** | 4 分 | ✅ 结构清晰（降维 → 聚类 → 流式统计 → A/B 测试）<br>✅ 方法选择有理由<br>✅ 明确方法边界<br>⚠️ 结构混乱：1-2 分<br>❌ 没有报告：0 分 |

**常见错误与扣分**：
- ❌ 没有在降维后聚类（直接在原始数据上）：-3 分
- ❌ 报告只列代码，没有解释：-3 分
- ❌ 没有说明方法边界：-2 分

---

### 习题 7：高维数据阅读心得（5 分，选做）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **核心概念理解** | 2 分 | ✅ 准确理解维度灾难<br>✅ 理解降维的必要性<br>⚠️ 理解不准确：1 分 |
| **方法选择** | 2 分 | ✅ 能说明何时用 PCA、何时用特征选择<br>✅ 能说明何时用 K-means、何时用 DBSCAN<br>⚠️ 场景不合理：1 分 |
| **工程视角** | 1 分 | ✅ 从工程角度（计算成本、实时性）讨论<br>❌ 纯学术角度：0 分 |

**常见错误与扣分**：
- ❌ 说"降维越多越好"：-1 分
- ❌ 混淆 K-means 和分类：-1 分
- ❌ 只谈理论，没有工程视角：-1 分

---

## AI 协作练习评分（可选，5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **问题识别** | 3 分 | ✅ 发现至少 3 个问题（降维、聚类、流式统计）<br>⚠️ 发现 2 个问题：2 分<br>⚠️ 发现 1 个问题：1 分 |
| **修复正确** | 2 分 | ✅ 修复后的代码可运行<br>✅ 修复合理（不是"改了就行"）<br>⚠️ 修复部分问题：1 分 |

**AI 代码中的常见问题**：
1. PCA 之前没有标准化数据
2. K-means 没有固定随机种子（结果不稳定）
3. 在原始高维数据上直接运行 K-means（没有先降维）
4. 在线方差实现错误（没有用 Welford 算法）
5. A/B 测试没有 SRM 检测
6. 完全自动化决策，没有 human-in-the-loop

---

## 总分换算

### 基础作业（必做）

| 习题 | 分值 |
|------|------|
| 习题 1 | 10 分 |
| 习题 2 | 20 分 |
| 习题 3 | 20 分 |
| 习题 4 | 20 分 |
| 习题 5 | 20 分 |
| 习题 6 | 15 分 |
| **小计** | **105 分** |

> 注：基础作业总分 105 分，超过 100 分按 100 分计算。

### 进阶作业（选做）

| 习题 | 分值 |
|------|------|
| 习题 7 | 5 分 |
| **小计** | **5 分** |

### AI 协作练习（可选）

| 练习 | 分值 |
|------|------|
| AI 审查报告 | 5 分（额外加分） |

### 最终得分

- **基础作业得分** / 105 × 100 = 基础分（百分制）
- **进阶作业加分**：最多 +5 分
- **AI 练习额外加分**：最多 +5 分

**示例**：
- 基础作业得 90 分：90/105 × 100 = 85.7 分
- 进阶作业得 5 分：85.7 + 5 = 90.7 分
- AI 练习得 3 分：90.7 + 3 = 93.7 分

---

## 评分维度详解

### 1. 代码质量（30 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **可运行性** | 10 分 | ✅ 所有代码可运行（无报错）<br>✅ 输出符合要求<br>⚠️ 部分报错：5-8 分<br>❌ 完全无法运行：0 分 |
| **结构清晰** | 10 分 | ✅ 函数封装合理（不是一坨代码）<br>✅ 变量命名清晰<br>✅ 有必要的注释<br>⚠️ 结构混乱：5-8 分<br>❌ 完全没有结构：0 分 |
| **随机种子** | 10 分 | ✅ 所有随机操作固定种子（PCA、K-means）<br>✅ 结果可复现<br>⚠️ 部分固定：5-8 分<br>❌ 没有固定：0 分 |

**常见扣分项**：
- 代码无法运行（-10 分）
- 没有固定随机种子（-5 分）
- 变量命名混乱（-3 分）
- 缺少注释（-2 分）

---

### 2. 统计理解（30 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **概念准确** | 15 分 | ✅ 区分维度灾难与多重共线性<br>✅ 区分特征选择与特征提取<br>✅ 区分聚类与分类<br>⚠️ 部分混淆：5-10 分<br>❌ 严重混淆：0 分 |
| **解释清晰** | 15 分 | ✅ 用自己的话解释（不是背定义）<br>✅ 解释有具体场景支撑<br>✅ 主成分能用业务语言解释<br>⚠️ 解释模糊：5-10 分<br>❌ 没有解释：0 分 |

**常见扣分项**：
- 混淆维度灾难与多重共线性（-5 分）
- 混淆特征选择与特征提取（-3 分）
- 主成分只说方差比例，没有业务解释（-5 分）
- 聚类结果没有解释（-3 分）

---

### 3. 可复现性（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **随机种子** | 10 分 | ✅ PCA 固定 random_state<br>✅ K-means 固定 random_state<br>✅ 数据生成固定种子<br>⚠️ 部分固定：5-8 分<br>❌ 没有固定：0 分 |
| **依赖明确** | 5 分 | ✅ 列出所有依赖包及版本<br>✅ 运行环境说明清晰<br>⚠️ 部分缺失：2-3 分<br>❌ 没有说明：0 分 |
| **结果可复现** | 5 分 | ✅ 新机器上可运行<br>✅ 结果与报告一致<br>⚠️ 部分复现：2-3 分<br>❌ 无法复现：0 分 |

**常见扣分项**：
- 没有固定随机种子（-10 分）
- 没有说明依赖包（-5 分）
- 代码有硬编码路径（-3 分）

---

### 4. 报告质量（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **结构清晰** | 8 分 | ✅ 有明确章节（习题 1-7）<br>✅ 每个习题有"问题 → 方法 → 结果 → 结论"<br>⚠️ 结构混乱：3-5 分<br>❌ 没有结构：0 分 |
| **结果解释** | 8 分 | ✅ 主成分有业务解释（如"活跃度"）<br>✅ 聚类结果有业务解释（如"高价值型"）<br>✅ 不是只列数字<br>⚠️ 解释模糊：3-5 分<br>❌ 没有解释：0 分 |
| **边界明确** | 4 分 | ✅ 明确说明"能回答什么"<br>✅ 明确说明"不能回答什么"<br>✅ 不夸大统计方法的能力<br>⚠️ 边界模糊：1-2 分<br>❌ 没有边界：0 分 |

**常见扣分项**：
- 报告只列数字，没有解释（-5 分）
- 主成分没有业务解释（-3 分）
- 聚类结果没有解释（-3 分）
- 没有写清结论边界（-2 分）

---

## 特殊扣分项

### 严重错误（直接扣 10-20 分）

- ❌ **没有标准化就做 PCA**：PCA 对尺度敏感（-10 分）
- ❌ **K-means 没有固定随机种子**：结果不可复现（-10 分）
- ❌ **混淆聚类与分类**：基础概念错误（-10 分）
- ❌ **代码完全无法运行**：没有测试就提交（-10 分）

### 中等错误（扣 3-5 分）

- ⚠️ 没有固定随机种子（-5 分）
- ⚠️ 主成分只列数字，没有业务解释（-5 分）
- ⚠️ 聚类结果没有解释（-3 分）
- ⚠️ 在线方差实现错误（-5 分）
- ⚠️ A/B 测试没有 SRM 检测（-3 分）

### 轻微错误（扣 1-2 分）

- ⚠️ 变量命名混乱（-2 分）
- ⚠️ 缺少注释（-2 分）
- ⚠️ 报告格式混乱（-2 分）
- ⚠️ 没有说明依赖包（-2 分）

---

## 优秀标准（获得 90+ 分的参考）

### 代码质量
- 所有代码可运行，函数封装合理，变量命名清晰
- 所有随机操作固定种子（PCA、K-means），结果 100% 可复现
- 有必要的注释，解释关键步骤（如 Welford 算法）

### 统计理解
- 完全区分维度灾难与多重共线性
- 准确区分特征选择与特征提取
- 主成分能用业务语言解释（如"活跃度"、"购买倾向"）
- 聚类结果有清晰的业务画像（如"高价值型"、"流失风险型"）

### 可复现性
- 固定所有随机种子
- 说明所有依赖包及版本
- 代码在新机器上可直接运行

### 报告质量
- 结构清晰（问题 → 方法 → 结果 → 结论）
- 降维、聚类结果有业务解释
- 明确说明方法边界（能回答什么、不能回答什么）
- StatLab 章节完整，展示计算专题的集成

---

## 最后提醒

### 对评分者
1. **先看代码能否运行**：如果无法运行，直接扣 10 分，不再检查后续
2. **固定随机种子是硬要求**：PCA 和 K-means 都需要固定
3. **标准化是 PCA 的前提**：没有标准化的 PCA 扣 5-10 分
4. **业务解释是加分项**：主成分和聚类结果有业务解释的加 3-5 分
5. **方法边界很重要**：说明能做什么、不能做什么的加 2-3 分

### 对学生
1. **不要直接复制参考代码**：理解后自己写，否则容易被识别为抄袭
2. **PCA 前必须标准化**：PCA 对尺度敏感
3. **固定 K-means 随机种子**：K-means 结果不稳定
4. **写清业务解释**：主成分和聚类结果不要只列数字
5. **说明方法边界**：不夸大统计方法的能力

祝学习顺利！高维数据的计算方法是数据科学家的核心技能，本周作业会帮你掌握从降维到聚类的完整工具链。
