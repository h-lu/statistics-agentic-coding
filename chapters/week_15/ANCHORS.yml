# Week 15 知识锚点
#
# 约定：
# - id: 周内唯一标识符（格式：week15-xxx）
# - claim: 知识断言（一句话结论）
# - evidence: 支持证据（可以是代码位置、数据观察、逻辑推导）
# - verification: 如何验证（运行代码、查看输出、推导检查）

- id: week15-curse-of-dimensionality
  claim: 当特征数接近或超过样本数时，传统统计方法会面临过拟合、计算爆炸、距离失效等问题
  evidence: examples/01_distance_curse.py 显示在 1000 维空间中，所有点对的平均距离趋于相等（约 44），距离度量失效
  verification: 运行 examples/01_distance_curse.py，观察维度增加时平均距离的变化

- id: week15-pca-reduction-rate
  claim: PCA 可以用少数主成分保留大部分信息（如用 47 个主成分保留 5000 维数据的 85% 方差）
  evidence: examples/01_pca_demo.py 输出 `n_components=47` 时 `explained_variance_ratio_.sum() ≈ 0.85`
  verification: 运行 PCA 降维，计算累积方差解释比例

- id: week15-pca-feature-loadings
  claim: 主成分是原始特征的线性组合，特征载荷反映每个原始特征对主成分的贡献
  evidence: PCA.components_ 的形状是 (n_components, n_features)，每个元素是该特征在该主成分上的权重
  verification: 检查 pca.components_[i] 的值分布和符号，解释主成分的业务含义

- id: week15-elbow-method-k-selection
  claim: 肘部法则通过绘制 K-means 的惯性（簇内平方和）随 K 变化的曲线，在"肘部"（拐点）处选择最优 K 值
  evidence: examples/02_clustering_demo.py 绘制惯性曲线，在 K=5 处出现明显的肘部
  verification: 运行聚类分析，绘制惯性随 K 变化的折线图，识别肘部位置

- id: week15-silhouette-score-clustering-quality
  claim: 轮廓系数衡量聚类质量，取值范围 [-1, 1]，值越接近 1 表示样本与自身簇越紧密、与相邻簇越分离
  evidence: examples/02_clustering_demo.py 使用 `silhouette_score` 计算 K=5 时轮廓系数约为 0.45
  verification: 运行 K-means 聚类，计算轮廓系数评估聚类质量

- id: week15-online-mean-o1-complexity
  claim: 在线均值算法通过维护样本计数 n 和总和 sum，以 O(1) 复杂度增量更新均值，无需遍历历史数据
  evidence: examples/03_streaming_demo.py 中 OnlineMean 类每次更新只需 O(1) 操作
  verification: 实现在线均值类，对比批量均值与在线均值的计算时间差异

- id: week15-welford-numerical-stability
  claim: Welford 算法通过维护均值 M2 和平方和 M2 增量更新方差，避免大数相减导致的数值精度损失
  evidence: examples/03_streaming_demo.py 对比批量方差与 Welford 在线方差，在大数据集上 Welford 更稳定
  verification: 运行流式统计示例，比较不同在线方差算法的数值稳定性

- id: week15-srm-detection
  claim: 样本比例异常（Sample Ratio Mismatch）是 A/B 测试中各组实际样本量与预期比例不一致的异常，会使 p 值失效
  evidence: examples/04_ab_test_demo.py 中 `detect_srm()` 函数通过卡方检验检测样本比例偏离
  verification: 运行 A/B 测试平台，故意制造样本比例异常，观察 SRM 检测是否触发

- id: week15-early-stopping-problem
  claim: 早期停止（Early Stopping）是 A/B 测试未达到预定样本量时就因 p 值显著而提前停止，会导致假阳性率增加（重复检验问题）
  evidence: examples/04_ab_test_demo.py 中决策规则包含 `continue_B` 标志，防止早期停止
  verification: 运行 A/B 测试平台，观察早期停止情况下系统行为

- id: week15-ab-testing-simpson-paradox
  claim: 分组结论（如按国家）与整体结论可能相反（辛普森悖论），需要在平台中增加辛普森悖论检查
  evidence: examples/04_ab_test_demo.py 中 `check_simpsons_paradox()` 函数验证分组与整体结论一致性
  verification: 运行 A/B 测试平台，构造分组与整体结论相反的数据，检查是否被正确检测

- id: week15-multicollinearity-vs-dimensionality
  claim: 多重共线性是"信息冗余"（特征间关系太近），维度灾难是"信息太多"（特征数量超过样本容量）
  evidence: CHAPTER.md 第 224 行的对比总结表格明确区分两者
  verification: 理解对比：多重共线性通过删除冗余特征解决，维度灾难通过降维（如 PCA）或增加样本解决
