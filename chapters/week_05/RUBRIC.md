# Week 05 作业评分标准

## 总分结构

| 题目类型 | 分值 | 说明 |
|---------|------|------|
| 基础题（必做） | 90 | 1-3 题，每题 25-35 分 |
| 进阶题（选做） | 30 | 4-5 题，每题 15 分 |
| 挑战题（加分） | 30 | 6-7 题，按评分点分配 |
| AI 协作练习（可选） | 10 | 审查报告质量 |

**总分上限**：160 分

---

## 基础题评分（90 分）

### 1. 模拟抛硬币实验（25 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 模拟实现正确 | 8 | 代码正确模拟抛硬币，单次和重复实验都实现 |
| 分布可视化 | 7 | 直方图清晰，有标题、轴标签，正确显示分布形状 |
| 原理解释 | 10 | 正确解释大数定律，区分单次实验和重复实验 |

**扣分项**：
- 没有固定随机种子（-3）
- 混淆"单次实验"和"重复实验"（-5）
- 没有画出分布直方图（-7）
- 只报告数字，没有解释原理（-5）

**示例评分**：
- **满分（25）**：实现完整，图表规范，原理解释清晰
- **20 分**：实现正确，但原理解释不够深入
- **15 分**：只有模拟，没有可视化或解释
- **0 分**：代码无法运行或未提交

---

### 2. 计算抽样分布（30 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 模拟设定正确 | 7 | 正确设定真实转化率、样本量、重复次数 |
| 分布统计量计算 | 8 | 正确计算均值、标准误，区分标准差和标准误 |
| 可视化质量 | 7 | 直方图清晰，标注观察值位置（如 12%） |
| 结论解释 | 8 | 正确回答"12% 是否可能是随机波动"，量化罕见程度 |

**扣分项**：
- 没有说明"抽样分布"概念（-5）
- 混淆"标准差"和"标准误"（-5）
- 没有量化"12% 是罕见还是常见"（-5）
- 结论没有数据支撑（-5）

**示例评分**：
- **满分（30）**：模拟完整，统计量正确，结论有数据支撑
- **24 分**：模拟正确，但结论解释不够深入
- **18 分**：只有模拟和计算，缺乏可视化或结论
- **0 分**：代码无法运行或未提交

---

### 3. 使用 Bootstrap 估计标准误（35 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| Bootstrap 实现正确 | 10 | 使用有放回抽样，正确实现重采样逻辑 |
| 标准误和置信区间计算 | 10 | 正确计算标准误和 95% 置信区间 |
| 可视化质量 | 8 | 直方图清晰，标注观察值、置信区间、零线 |
| 结论和局限性讨论 | 7 | 结论严谨，提到需要正式检验，讨论了 Bootstrap 的局限 |

**扣分项**：
- Bootstrap 没有使用"有放回抽样"（-5）
- 混淆"标准差"和"标准误"（-5）
- 误读置信区间（-5）
- 没有固定随机种子（-3）
- 过度自信的结论（如"证明 A 渠道更好"）（-3）

**示例评分**：
- **满分（35）**：Bootstrap 实现正确，可视化完整，结论严谨
- **28 分**：实现正确，但结论没有讨论局限性
- **21 分**：实现基本正确，但可视化或结论有缺陷
- **0 分**：代码无法运行或未提交

---

## 进阶题评分（30 分）

### 4. 验证中心极限定理（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 模拟设计 | 5 | 使用右偏分布（如指数），多个样本量对比 |
| 可视化质量 | 5 | 多子图清晰，显示从偏态到钟形的过程 |
| 结论解释 | 5 | 正确总结 CLT，指出样本量阈值 |

### 5. 比较不同样本量的 Bootstrap 置信区间（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 实现正确 | 5 | 多个样本量的 Bootstrap 都正确实现 |
| 可视化质量 | 5 | 折线图清晰，显示样本量与置信区间宽度的关系 |
| 分析深入 | 5 | 不仅是描述，还解释了边际收益递减 |

---

## 挑战题评分（30 分）

### 6. 用 Bootstrap 比较两组差异（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| Bootstrap 实现正确 | 5 | 多变量的 Bootstrap 都正确实现 |
| 结果可视化清晰 | 5 | 多子图布局合理，每个图都有标注 |
| 结论解释合理 | 5 | 正确识别显著差异，解释业务含义 |
| 讨论了局限性 | 5 | 提到样本代表性、多重比较等问题 |

**扣分项**：
- 没有区分显著和不显著的差异（-3）
- 结论过度自信（-3）
- 没有讨论局限性（-3）

**示例评分**：
- **满分（20）**：完整分析，可视化清晰，结论严谨
- **16 分**：分析正确，但可视化或讨论不够深入
- **12 分**：基本实现，但有明显缺陷
- **0 分**：未完成或代码无法运行

---

### 7. 设计多重比较校正实验（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 实验设计 | 3 | 正确模拟"无差异"场景下的多次检验 |
| 假阳性量化 | 3 | 正确计算和报告假阳性概率 |
| Bonferroni 校正 | 2 | 正确实现校正并比较结果 |
| 权衡讨论 | 2 | 讨论了假阳性 vs 假阴性的权衡 |

---

## AI 协作练习评分（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 问题识别 | 4 | 至少指出 3 个 AI 结论中的问题 |
| 改进质量 | 3 | 改进后的结论更严谨、更准确 |
| 学习反思 | 3 | 有对 AI 局限性的深入思考 |

**扣分项**：
- 只验证数字，没有审查结论（-3）
- 没有改进版本（-2）
- 没有学习反思（-2）
- 问题识别不准确（-2）

**示例评分**：
- **满分（10）**：问题识别准确，改进合理，反思深入
- **7 分**：识别了问题，但改进或反思不够
- **4 分**：只完成了部分审查
- **0 分**：未完成或直接复制 AI 输出

---

## 通用评分标准

### 代码质量（-2 分/项，最多 -10 分）

| 问题 | 扣分 |
|------|------|
| 代码无法运行 | -10 |
| 变量命名混乱 | -2 |
| 没有注释或文档 | -2 |
| 硬编码路径或参数 | -2 |
| 没有使用函数封装 | -2 |

### 报告质量（-3 分/项，最多 -15 分）

| 问题 | 扣分 |
|------|------|
| 结构混乱，难以阅读 | -5 |
| 只粘贴代码输出，没有解释 | -5 |
| 图表没有标题或说明 | -3 |
| 缺少关键结论 | -5 |
| 语言表达不清 | -3 |

### 统计理解（-5 分/项，最多 -15 分）

| 问题 | 扣分 |
|------|------|
| 混淆"标准差"和"标准误" | -5 |
| 误读置信区间 | -5 |
| 将相关当因果 | -5 |
| 过度自信的结论 | -5 |
| 忽视不确定性 | -5 |

---

## 等级划分

| 总分范围 | 等级 | 描述 |
|----------|------|------|
| 100+ | A | 优秀：完成基础题，高质量完成进阶或挑战题 |
| 90-99 | A- | 良好：完成基础题，有一定进阶 |
| 80-89 | B+ | 中上：完成基础题，质量尚可 |
| 70-79 | B | 及格：完成基础题，但质量一般 |
| < 70 | C | 不及格：基础题未完成或有严重错误 |

---

## 测试支持

以下是评分时会运行的测试用例（伪代码）：

```python
# 测试 1：抛硬币模拟
def test_coin_flip_simulation():
    result = student_solution.simulate_coin_flips(n_flips=1000, seed=42)
    assert 450 <= result['heads'] <= 550  # 合理范围内
    assert 'distribution' in result  # 有分布数据

# 测试 2：抽样分布
def test_sampling_distribution():
    result = student_solution.simulate_sampling_distribution(
        true_rate=0.10, sample_size=1000, n_simulations=1000, seed=42
    )
    assert abs(result['mean'] - 0.10) < 0.01  # 均值接近真实值
    assert 'standard_error' in result
    assert result['standard_error'] > 0

# 测试 3：Bootstrap 实现
def test_bootstrap():
    data_a = np.array([1] * 120 + [0] * 880)
    data_b = np.array([1] * 90 + [0] * 910)
    result = student_solution.bootstrap_difference(
        data_a, data_b, n_bootstrap=1000, seed=42
    )
    assert 'observed_diff' in result
    assert 'standard_error' in result
    assert 'ci_lower' in result
    assert 'ci_upper' in result
    assert result['observed_diff'] == 0.03  # 12% - 9%

# 测试 4：随机性检查
def test_random_seed():
    result1 = student_solution.bootstrap_difference(data_a, data_b, seed=42)
    result2 = student_solution.bootstrap_difference(data_a, data_b, seed=42)
    assert result1['ci_lower'] == result2['ci_lower']  # 结果应一致

# 测试 5：可视化输出
def test_visualizations():
    assert Path('output/coin_flip_distribution.png').exists()
    assert Path('output/sampling_distribution.png').exists()
    assert Path('output/bootstrap_distribution.png').exists()

# 测试 6：概念理解
def test_concept_understanding(report):
    # 检查报告中是否正确使用概念
    assert '抽样分布' in report or 'sampling distribution' in report
    assert '标准误' in report or 'standard error' in report
    # 检查是否混淆概念
    assert not re.search(r'标准差.*标准差', report)  # 不应重复
```

---

## 评分流程

1. **代码运行**：先运行测试，确保代码可执行
2. **报告阅读**：阅读 `report.md`，检查统计理解和结论质量
3. **图表检查**：打开生成的图表，检查质量和标注
4. **概念检查**：确认学生理解了本周核心概念（抽样分布、标准误、Bootstrap、置信区间）
5. **加分项**：检查进阶题、挑战题、AI 练习
6. **扣分项**：检查代码、报告、统计理解问题
7. **总分计算**：各项相加，确定等级

---

## 反馈模板（评分后提供）

```markdown
## 评分反馈

**总分**：XX / 160（等级：X）

### 做得好的地方
- [具体表扬：如概念理解清晰、可视化规范、结论严谨等]

### 需要改进的地方
- [具体问题]（扣分：XX）

### 统计概念反馈
- **抽样分布**：[是否理解]
- **标准误 vs 标准差**：[是否混淆]
- **Bootstrap 实现**：[是否正确]
- **置信区间解释**：[是否准确]

### 建议
- [学习建议：如加强某概念理解、注意可视化规范等]
```

---

## 本周重点考核概念

| 概念 | 考核方式 |
|------|---------|
| 随机性与长期频率 | 题 1：抛硬币模拟 |
| 抽样分布 | 题 2：重复抽样模拟 |
| 标准误 vs 标准差 | 题 2-3：区分计算和解释 |
| Bootstrap 方法 | 题 3：重采样实现 |
| 置信区间 | 题 3、5：计算和解释 |
| 中心极限定理 | 题 4：CLT 验证 |
| 假阳性与多重比较 | 题 7：模拟假阳性 |

**评分重点**：本周强调**概念理解**和**不确定性思维**。学生不应只追求计算正确，更要理解"为什么需要量化不确定性"和"如何解释不确定性"。
