# Week 14 作业评分标准

## 评分总览

| 层级 | 分值范围 | 核心要求 |
|------|---------|---------|
| **基础层** | 0-60 分 | 贝叶斯定理理解、先验选择、后验分布计算与可视化 |
| **进阶层** | 0-30 分 | PyMC MCMC 采样、收敛性检查、先验敏感性分析 |
| **挑战层** | 0-10 分 | 贝叶斯 A/B 测试、预期损失计算 |
| **总计** | 0-100 分 | 满分 100 分（挑战层为加分项） |

---

## 基础层评分（60 分）

### 任务 1：贝叶斯定理——手动计算后验分布（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确区分置信区间和可信区间 | 6 分 | 3 分：正确解释频率学派置信区间<br>3 分：正确解释贝叶斯学派可信区间 |
| 正确解释 p 值的含义 | 5 分 | 3 分：说明 p 值是 P(data\|H0)<br>2 分：说明 p 值不是 P(H0\|data) |
| 正确计算后验分布 | 5 分 | 2 分：正确使用 Beta-Binomial 共轭先验<br>3 分：后验参数、均值、区间计算正确 |
| 用自己的话解释 | 4 分 | 4 分：用自己的话，不是复制粘贴 |

**扣分项**：
- 认为置信区间可以解释为"参数有 95% 的概率在这个区间里"：-4 分
- 认为 p 值是"原假设成立的概率"：-4 分
- 混淆先验、似然、后验的关系：-3 分
- 直接复制粘贴示例内容：-5 分

---

### 任务 2：先验分布的选择（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确区分三种先验类型 | 6 分 | 2 分/类型，共 3 个类型（无信息、弱信息、信息性） |
| 选择了合理的 Beta 参数 | 5 分 | 2 分：参数范围合理<br>3 分：等价样本量（alpha+beta）合理 |
| 解释了每个先验的含义和使用场景 | 5 分 | 2 分：解释了先验的含义<br>3 分：说明了使用场景 |
| 理解数据量对先验-后验关系的影响 | 4 分 | 4 分：理解"数据最终会战胜先验"的性质 |

**扣分项**：
- 认为"无信息先验"就是"没有假设"：-3 分
- 信息性先验的等价样本量太小（如 alpha=1.5, beta=8.5）：-4 分
- 没有理解数据量对先验-后验关系的影响：-3 分
- 只列参数没有解释：-5 分

---

### 任务 3：后验分布的可视化（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 代码可以运行 | 5 分 | 5 分：代码能正确运行 |
| 图表清晰 | 6 分 | 2 分：标注了先验和后验<br>2 分：标注了后验均值<br>2 分：标注了可信区间 |
| x 轴范围合理 | 3 分 | 3 分：x 轴范围合适（不是 0-1 全范围） |
| 解释了"信念更新"的过程 | 6 分 | 3 分：解释了先验如何被数据更新<br>3 分：用图例说明"折中"效果 |

**扣分项**：
- 没有标注图例：-4 分
- x 轴范围不合适（如从 0 到 1）：-2 分
- 没有解释"信念更新"：-4 分
- 只给代码没有分析：-8 分

---

## 进阶层评分（30 分）

### 任务 4：用 PyMC 进行 MCMC 采样（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确使用 PyMC 库 | 4 分 | 2 分：正确导入和定义模型<br>2 分：正确设置采样参数 |
| 检查收敛性 | 4 分 | 2 分：计算了 R-hat<br>2 分：计算了 ESS |
| 绘制图表 | 4 分 | 2 分：绘制了后验分布图<br>2 分：绘制了迹图 |
| 解释收敛性判断 | 3 分 | 3 分：解释了 R-hat < 1.05 和 ESS > 400 的含义 |

**加分项**：
- 尝试了不同的先验：+3 分
- 计算了 P(θ > 阈值 \| data)：+2 分

**扣分项**：
- 代码无法运行：-8 分
- 没有检查收敛性：-5 分
- 没有解释如何判断收敛：-3 分

---

### 任务 5：先验敏感性分析（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 定义了三个不同的先验 | 3 分 | 1 分/先验，共 3 个先验 |
| 计算了每个先验的后验 | 4 分 | 4 分：后验计算正确 |
| 比较了后验的差异 | 4 分 | 2 分：计算了后验均值差异<br>2 分：比较了可信区间 |
| 解释了结论对先验是否敏感 | 4 分 | 4 分：基于数据量正确判断敏感性 |

**扣分项**：
- 只用了一个先验：-6 分
- 没有比较后验差异：-5 分
- 没有解释敏感性结论：-3 分
- 只给代码没有分析：-8 分

---

## 挑战层评分（10 分 + 加分）

### 任务 6：贝叶斯 A/B 测试（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确使用贝叶斯 A/B 测试方法 | 3 分 | 3 分：方法正确（采样或解析解） |
| 计算 P(θ_B > θ_A \| data) | 3 分 | 3 分：计算正确 |
| 计算预期损失 | 2 分 | 2 分：计算正确 |
| 用业务语言解释结果 | 2 分 | 2 分：用非技术语言解释 |

**加分项**：
- 绘制了两个后验分布的对比图：+3 分
- 讨论了"停止规则"：+2 分

---

## AI 协作练习（可选，额外 3-5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 审查清单完成 | 2 分 | 2 分：勾选了 AI 生成内容中的问题 |
| 修订版质量 | 3 分 | 3 分：修订版准确、完整，修正了识别出的问题 |

---

## StatLab 任务（额外 10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 先验定义 | 3 分 | 1 分/先验，共 3 个先验 |
| 后验计算 | 3 分 | 3 分：后验均值、可信区间计算正确 |
| 先验敏感性分析 | 2 分 | 2 分：正确判断敏感性 |
| 与频率学派对比 | 2 分 | 2 分：正确对比两种方法 |

---

## 评分维度说明

### 1. 概念理解（40%）
- 理解贝叶斯定理：P(θ\|data) ∝ P(data\|θ) × P(θ)
- 区分频率学派和贝叶斯学派的核心差异
- 正确解释 p 值和后验概率的区别
- 区分置信区间和可信区间

### 2. 实践能力（40%）
- 能计算后验分布（解析解或 MCMC 采样）
- 能选择合适的先验分布
- 能进行先验敏感性分析
- 能用 PyMC 进行 MCMC 采样

### 3. 批判性思维（15%）
- 识别 AI 生成内容的问题
- 反思先验选择的影响
- 讨论贝叶斯方法的局限性

### 4. 表达能力（5%）
- 用业务语言向非技术读者解释
- 用自己的话，不是复制粘贴
- 写作清晰、有条理

---

## 常见错误与扣分标准

| 错误类型 | 扣分 | 说明 |
|---------|------|------|
| 认为置信区间可以解释为"参数有 95% 的概率在这个区间里" | -5 分 | 这是频率学派和贝叶斯学派的核心区别 |
| 认为 p 值是"原假设成立的概率" | -5 分 | p 值是 P(data\|H0)，不是 P(H0\|data) |
| 混淆先验、似然、后验的关系 | -4 分 | "后验 = 先验 × 似然"是核心公式 |
| 认为"无信息先验"就是"没有假设" | -3 分 | "完全无知"也是一种假设 |
| 没有检查 MCMC 收敛性 | -5 分 | R-hat 和 ESS 是必须检查的 |
| 没有做先验敏感性分析 | -5 分 | 这是贝叶斯方法的核心实践 |
| 代码无法运行 | -8 分 | 需确保代码可运行或注明伪代码 |
| 只给代码没有分析 | -20% | 分析和代码同等重要 |
| 复制粘贴示例内容 | -10 分 | 必须用你自己的话 |

---

## 优秀作业示例特征

一份优秀的作业应该：

1. **概念理解部分**：
   - 正确区分了频率学派和贝叶斯学派
   - 正确解释了 p 值和后验概率的区别
   - 正确区分了置信区间和可信区间
   - 理解"后验 = 先验 × 似然"的核心公式

2. **先验选择部分**：
   - 正确区分了无信息、弱信息、信息性先验
   - 选择了合理的 Beta 参数
   - 理解数据量对先验-后验关系的影响

3. **后验计算部分**：
   - 正确计算了后验分布（解析解）
   - 可视化了先验和后验分布
   - 解释了"信念更新"的过程

4. **MCMC 采样部分**：
   - 正确使用了 PyMC 进行 MCMC 采样
   - 检查了收敛性（R-hat、ESS）
   - 绘制了后验分布和迹图

5. **敏感性分析部分**：
   - 定义了多个不同的先验
   - 比较了后验的差异
   - 正确判断了结论对先验是否敏感

6. **批判性思维部分**：
   - 识别了 AI 生成内容的问题
   - 反思了贝叶斯方法的局限性
   - 讨论了先验选择的影响

---

## 反馈建议模板

在给作业反馈时，可以使用以下模板：

```
【优点】
- （具体表扬，如：正确区分了置信区间和可信区间，先验选择合理）

【待改进】
- （具体问题，如：MCMC 收敛性检查不完整，应该同时检查 R-hat 和 ESS）
- （具体建议，如：建议用业务语言解释"为什么后验是先验和数据的折中"）

【总分】X/100
```

---

## 测试与验证

作业中的关键检查点应该能被 `tests/` 目录中的测试覆盖：

- `test_bayes_theorem()`：验证贝叶斯定理的理解
- `test_beta_binomial_posterior()`：验证 Beta-Binomial 后验计算
- `test_prior_selection()`：验证先验选择的合理性
- `test_mcmc_convergence()`：验证 MCMC 收敛性检查
- `test_prior_sensitivity()`：验证先验敏感性分析

评分时可以运行这些测试来验证代码正确性。

---

## 最后提醒

评分的目的是帮助学生学习，而不仅仅是打分。在评分时：

1. 指出具体的错误和改进方向
2. 鼓励学生明确先验假设（先验必须写下来）
3. 认可学生对频率学派和贝叶斯学派区别的思考
4. 强调"贝叶斯方法的核心是'明确假设'——先验必须明确，敏感性分析必须做"

记住 Week 14 的核心目标：**理解贝叶斯定理，区分频率学派和贝叶斯学派，选择合适的先验分布，计算后验分布，进行先验敏感性分析，在 StatLab 报告中用贝叶斯方法量化不确定性。**

特别提醒：本周的"先验敏感性分析"和"明确先验假设"是新增的核心评分维度，与传统的技术正确性同等重要。贝叶斯方法的优势是"诚实地表达不确定性"——不假装确定，而是明确"我们有多确定"。
