# Week 06 作业评分标准

## 总分结构

| 题目类型 | 分值 | 说明 |
|---------|------|------|
| 基础题（必做） | 90 | 1-3 题，每题 25-35 分 |
| 进阶题（选做） | 30 | 4-5 题，每题 10-20 分 |
| 挑战题（加分） | 40 | 6-7 题，每题 15-25 分 |
| AI 协作练习（可选） | 10 | 审查报告质量 |

**总分上限**：170 分

---

## 基础题评分（90 分）

### 1. p 值解释练习（30 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| p 值定义准确 | 10 | 正确定义 p 值（条件概率，不是结论概率） |
| 误解辨析正确 | 12 | 至少指出 3 个误解并说明为什么错 |
| 解释为什么 p < 0.05 不等于结论成立 | 8 | 能说出"假阳性风险"、"需要效应量"等关键点 |

**扣分项**：
- p 值定义中混淆"条件"和"结论"（-5）
- 没有明确指出哪些说法是错误的（-5）
- 只说"不对"，没有解释为什么（-3）
- 没有提到"显著性水平是历史惯例"（-2）

**示例评分**：
- **满分（30）**：定义准确，辨析深入，解释清晰
- **24 分**：定义正确，辨析完整，但解释不够深入
- **18 分**：定义基本正确，但辨析不完整
- **0 分**：未完成或定义完全错误

---

### 2. 执行 t 检验（35 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 假设设定正确 | 7 | 原假设和备择假设设定正确 |
| 描述统计完整 | 7 | 样本量、均值、标准差都报告了 |
| 检验方法选择合理 | 8 | 根据数据类型和假设选择合适的检验 |
| 结果报告完整 | 8 | t 统计量、p 值、置信区间都报告了 |
| 结论严谨 | 5 | 没有过度解读，区分统计结论和业务含义 |

**扣分项**：
- 没有写原假设/备择假设（-7）
- 只报告 p 值，没有报告置信区间（-5）
- 没有检查方差齐性（-4）
- 结论过度解读（如"证明 A 更好"）（-5）
- 转化率数据用了 t 检验（应该用比例检验）（-3）

**示例评分**：
- **满分（35）**：假设正确，描述完整，方法合理，结论严谨
- **28 分**：检验正确，但描述统计或结论有缺陷
- **21 分**：基本实现，但有明显错误
- **0 分**：未完成或代码无法运行

---

### 3. 计算效应量（25 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| Cohen's d 计算正确 | 8 | 公式正确，结果准确 |
| 效应量解释准确 | 7 | 正确解释"小/中/大效应" |
| 业务语言解释 | 6 | 用非统计语言解释实际含义 |
| 区分显著和重要 | 4 | 能区分"统计显著"和"实际意义" |

**扣分项**：
- Cohen's d 计算错误（-8）
- 只报告数值，没有解释（-7）
- 认为"显著就是重要"（-4）
- 没有用业务语言解释（-3）

**示例评分**：
- **满分（25）**：计算正确，解释清晰，业务语言恰当
- **20 分**：计算正确，但解释不够深入
- **15 分**：计算正确，但解释有缺陷
- **0 分**：未完成或计算错误

---

## 进阶题评分（30 分）

### 4. 假设检查实践（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 正态性检查 | 6 | Q-Q 图 + Shapiro-Wilk 检验都做了 |
| 方差齐性检查 | 5 | Levene 检验正确执行 |
| 检验方法选择 | 5 | 根据假设检查结果选择合适的方法 |
| 检验选择说明 | 4 | 清楚解释为什么选择这个方法 |

**扣分项**：
- 只用一种检验，没有检查假设（-10）
- Q-Q 图没有画或画错（-3）
- 没有根据结果选择检验方法（-5）
- 大样本时对 Shapiro-Wilk 过于敏感（-2）

**示例评分**：
- **满分（20）**：检查完整，选择合理，说明清晰
- **16 分**：检查完整，但说明不够
- **12 分**：基本实现，但有缺陷
- **0 分**：未完成

---

### 5. 非参数检验应用（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 分布可视化 | 3 | 箱线图或直方图清晰 |
| 非参数检验正确 | 4 | Mann-Whitney U 检验正确执行 |
| 检验对比 | 3 | 比较了参数和非参数检验的结果 |

**扣分项**：
- 没有画分布图（-3）
- 没有对比两种检验（-3）
- 没有说明什么时候用非参数（-2）

---

## 挑战题评分（40 分）

### 6. 完整检验报告撰写（25 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 报告结构完整 | 5 | 包含假设、描述、检验、结论、局限 |
| 检验方法正确 | 5 | 每个指标用了合适的检验方法 |
| 效应量和置信区间都报告 | 5 | 没有只报告 p 值 |
| 结论严谨，讨论局限 | 5 | 没有过度解读，说明了不确定性 |
| 语言清晰，非专家能懂 | 5 | 避免过多术语，用业务语言 |

**扣分项**：
- 只报告 p 值（-5）
- 没有讨论局限（-5）
- 结论过度解读（-5）
- 语言过于专业（-3）

**示例评分**：
- **满分（25）**：报告完整，严谨，清晰
- **20 分**：报告完整，但语言或结论有改进空间
- **15 分**：基本结构正确，但有明显缺陷
- **0 分**：未完成

---

### 7. 审查 AI 生成的结论（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 问题识别准确 | 6 | 至少指出 3 个问题 |
| 改进合理 | 4 | 改进后的结论更严谨 |
| 向业务团队的汇报清晰 | 5 | 用业务语言，不堆砌术语 |

**扣分项**：
- 问题识别少于 3 个（-2/个）
- 只列问题，没有改进（-4）
- 向业务团队的汇报仍太专业（-2）

**示例评分**：
- **满分（15）**：问题识别准确，改进合理，汇报清晰
- **12 分**：问题识别准确，但改进或汇报不够
- **8 分**：只完成了部分审查
- **0 分**：未完成或直接复制 AI 输出

---

## AI 协作练习评分（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 审查清单使用 | 4 | 用清单系统性地审查 AI 输出 |
| 问题识别 | 3 | 至少指出 3 个 AI 漏掉的问题 |
| 学习反思 | 3 | 有对 AI 局限性的思考 |

**扣分项**：
- 没有用清单审查（-2）
- 问题识别不准确（-2）
- 没有学习反思（-2）
- 直接接受 AI 输出（0 分）

---

## 通用评分标准

### 代码质量（-2 分/项，最多 -10 分）

| 问题 | 扣分 |
|------|------|
| 代码无法运行 | -10 |
| 变量命名混乱 | -2 |
| 没有注释或文档 | -2 |
| 硬编码路径或参数 | -2 |
| 没有使用函数封装 | -2 |

### 报告质量（-3 分/项，最多 -15 分）

| 问题 | 扣分 |
|------|------|
| 结构混乱，难以阅读 | -5 |
| 只粘贴代码输出，没有解释 | -5 |
| 图表没有标题或说明 | -3 |
| 缺少关键结论 | -5 |
| 语言表达不清 | -3 |

### 统计理解（-5 分/项，最多 -20 分）

| 问题 | 扣分 |
|------|------|
| p 值解释错误 | -10 |
| 混淆"显著"和"重要" | -5 |
| 忽视前提假设 | -5 |
| 过度解读结论 | -5 |
| 只报告 p 值 | -5 |

---

## 等级划分

| 总分范围 | 等级 | 描述 |
|----------|------|------|
| 110+ | A | 优秀：完成基础题，高质量完成进阶或挑战题 |
| 100-109 | A- | 良好：完成基础题，有一定进阶 |
| 90-99 | B+ | 中上：完成基础题，质量尚可 |
| 80-89 | B | 及格：完成基础题，但质量一般 |
| < 80 | C | 不及格：基础题未完成或有严重错误 |

---

## 测试支持

以下是评分时会运行的测试用例（伪代码）：

```python
# 测试 1：p 值解释
def test_p_value_definition(report):
    # 检查是否正确定义了 p 值
    assert '原假设成立时' in report or '假设' in report
    assert not re.search(r'结论.*概率', report)  # 不应说"结论成立的概率"

# 测试 2：t 检验执行
def test_t_test_execution():
    result = student_solution.run_t_test(data, 'channel', 'revenue')
    assert 't_statistic' in result
    assert 'p_value' in result
    assert 'confidence_interval' in result
    assert 0 <= result['p_value'] <= 1

# 测试 3：效应量计算
def test_effect_size():
    result = student_solution.calculate_cohens_d(group_a, group_b)
    assert 'cohens_d' in result
    assert isinstance(result['cohens_d'], (int, float))

# 测试 4：假设检查
def test_assumption_checks():
    result = student_solution.check_assumptions(group_a, group_b)
    assert 'normality_p_value' in result
    assert 'levene_p_value' in result
    assert 'recommended_test' in result

# 测试 5：可视化输出
def test_visualizations():
    assert Path('output/qq_plot.png').exists()
    assert Path('output/boxplot.png').exists()

# 测试 6：报告完整性
def test_report_completeness(report):
    # 检查报告是否包含关键要素
    assert '原假设' in report or 'H0' in report
    assert '效应量' in report or 'Cohen' in report
    assert '置信区间' in report or 'confidence' in report
    # 检查是否不只报告 p 值
    if 'p 值' in report or 'p_value' in report:
        assert '效应量' in report or '置信区间' in report
```

---

## 评分流程

1. **代码运行**：先运行测试，确保代码可执行
2. **报告阅读**：阅读 `report.md`，检查统计理解和结论质量
3. **图表检查**：打开生成的图表，检查质量和标注
4. **概念检查**：确认学生理解了本周核心概念（p 值、效应量、前提假设）
5. **加分项**：检查进阶题、挑战题、AI 练习
6. **扣分项**：检查代码、报告、统计理解问题
7. **总分计算**：各项相加，确定等级

---

## 反馈模板（评分后提供）

```markdown
## 评分反馈

**总分**：XX / 170（等级：X）

### 做得好的地方
- [具体表扬：如 p 值解释准确、效应量报告完整、结论严谨等]

### 需要改进的地方
- [具体问题]（扣分：XX）

### 统计概念反馈
- **p 值理解**：[是否正确定义为条件概率]
- **效应量**：[是否报告并解释]
- **前提假设**：[是否检查并据此选择检验方法]
- **结论严谨性**：[是否过度解读]

### 建议
- [学习建议：如加强对 p 值的理解、注意报告效应量等]
```

---

## 本周重点考核概念

| 概念 | 考核方式 |
|------|---------|
| p 值的正确定义 | 题 1：解释辨析 |
| 假设检验框架 | 题 2：设定 H0/H1 |
| 检验方法选择 | 题 2、4：根据数据类型和假设选择 |
| 效应量 | 题 3、6：计算和解释 |
| 前提假设检查 | 题 4、5：正态性、方差齐性 |
| 审查 AI 结论 | 题 7、AI 练习：识别常见错误 |

**评分重点**：本周强调**"会审查检验"**，不只是"会跑检验"。学生应该：
1. 正确理解 p 值（不是结论概率）
2. 报告效应量（不只报告 p 值）
3. 检查前提假设（不盲目跑检验）
4. 严谨的结论（不过度解读）

---

## 与上周的对比

| Week 05 | Week 06 |
|---------|---------|
| 量化不确定性（标准误、置信区间） | 假设检验（p 值、显著性判断） |
| "差异可能是多少" | "差异是否显著" |
| 用模拟建立直觉 | 用检验做决策 |
| Bootstrap 方法 | t 检验、非参数检验 |
| 不判断显著性 | 判断显著性，但强调效应量 |

**承上启下**：Week 05 的置信区间与 p 值有对应关系（95% CI 不包含 0 ≈ p < 0.05）。Week 06 将"不确定性量化"升级为"显著性判断"，同时强调"显著不等于重要"（引入效应量）。Week 07 将进一步讨论"多重比较"问题。
