# Week 07 评分标准

**总分**：100 分（基础作业）+ 20 分（进阶作业）+ 30 分（挑战作业）+ 10 分（AI 协作练习）

**及格线**：60 分（基础作业必须完成）

---

## 基础作业评分（100 分）

### 题目 1：计算 FWER（25 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 函数正确性 | 10 分 | `calculate_fwer(m, alpha=0.05)` 正确实现，公式无误 |
| 表格完整性 | 5 分 | 输出表格包含检验次数、FWER、FWER百分比三列 |
| 解释说明 | 5 分 | 用一句话解释为什么检验次数越多假阳性风险越大 |
| 代码可运行 | 5 分 | 代码无语法错误，可正常运行 |

**扣分项**：
- 函数名拼写错误或参数错误（-3 分）
- 公式错误（如 FWER = α × m）（-5 分）
- 只输出数字，无表格格式（-2 分）
- 无解释或解释错误（-3 分）

---

### 题目 2：执行 ANOVA（30 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 描述统计 | 5 分 | 正确计算样本量、均值、标准差 |
| ANOVA 执行 | 8 分 | 正确使用 `scipy.stats.f_oneway`，F 统计量和 p 值正确 |
| 前提假设检查 | 10 分 | 检查正态性（Shapiro-Wilk）和方差齐性（Levene） |
| 结论正确性 | 5 分 | 根据 p 值得出正确结论（拒绝/不拒绝原假设） |
| 代码可运行 | 2 分 | 代码无语法错误 |

**扣分项**：
- 忘记检查前提假设（-8 分）
- 只报告 p 值，不报告 F 统计量（-3 分）
- 结论表述错误（如"证明原假设"）（-3 分）
- 混淆"显著"和"重要"（-2 分）

---

### 题目 3：事后比较（20 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| Tukey HSD 执行 | 8 分 | 正确使用 `pairwise_tukeyhsd` |
| 结果完整性 | 6 分 | 包含均值差异、校正后 p 值、95% 置信区间 |
| 显著比较识别 | 4 分 | 正确找出显著差异对（校正后 p < 0.05） |
| 解释说明 | 2 分 | 解释事后比较的必要性 |

**扣分项**：
- 使用未校正的 t 检验（-8 分）
- 只看原始 p 值，忽略校正后 p 值（-5 分）
- 忘记解释均值差异的实际意义（-2 分）

---

### 题目 4：校正方法比较（25 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 三种方法实现 | 10 分 | 正确实现未校正、Bonferroni、FDR 三种方法 |
| 对比表格 | 8 分 | 表格清晰展示三种方法的拒绝数、阈值差异 |
| 方法解释 | 5 分 | 解释 Bonferroni 和 FDR 的区别和适用场景 |
| 代码可运行 | 2 分 | 代码无语法错误 |

**扣分项**：
- 只比较拒绝数量，不解释差异原因（-3 分）
- 混淆校正后 α 阈值和校正后 p 值（-3 分）
- 使用错误的 multipletests 参数（-2 分）

---

## 进阶作业评分（20 分）

### 题目 5：非参数替代（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 数据生成 | 2 分 | 正确生成长尾分布数据（如指数分布） |
| 双方法执行 | 3 分 | 同时执行 ANOVA 和 Kruskal-Wallis |
| 结果比较 | 3 分 | 比较两种方法的结论是否一致 |
| 方法选择建议 | 2 分 | 正确说明什么时候用 Kruskal-Wallis |

---

### 题目 6：效应量计算（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| η² 计算正确 | 5 分 | 正确计算 SS_between、SS_total 和 η² |
| 效应量解释 | 3 分 | 解释 η² 的含义（组间变异占总变异的比例） |
| 实际意义 | 2 分 | 给出效应量的实际意义解释（小/中/大） |

**扣分项**：
- 只报告数值，无解释（-3 分）
- 混淆 η² 和 Cohen's d（-2 分）

---

## 挑战作业评分（30 分）

### 题目 7：完整分析流程（30 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 数据探索与可视化 | 5 分 | 箱线图和条形图清晰、标注完整 |
| ANOVA 执行 | 5 分 | 正确执行 ANOVA，检查前提假设 |
| 事后比较 | 5 分 | Tukey HSD 执行正确，结果解释清晰 |
| 效应量计算 | 3 分 | 正确计算 η² 并解释 |
| 校正策略说明 | 4 分 | 说明校正方法和理由 |
| 报告可读性 | 5 分 | 报告结构清晰、语言通顺 |
| 商业建议合理性 | 3 分 | 建议基于统计结论，不过度推断 |

**加分项**：
- 报告特别优秀，可读性强（+2 分）
- 商业建议特别有洞察力（+2 分）

**扣分项**：
- 缺少可视化（-5 分）
- 报告格式混乱（-3 分）
- 商业建议过度推断（如"证明因果关系"）（-3 分）

---

## AI 协作练习评分（10 分）

### 题目 8：审查 AI 报告（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 问题识别准确性 | 4 分 | 识别出 3-5 个真实问题 |
| 审查报告说服力 | 3 分 | 报告逻辑清晰，有理有据 |
| 修订建议合理性 | 2 分 | 建议可行，符合统计原则 |
| 代码验证（可选） | 1 分 | 用 Python 验证了修订建议 |

**评分示例**：

| 识别问题数量 | 得分 |
|-------------|------|
| 识别 5 个问题 | 4 分 |
| 识别 3-4 个问题 | 3 分 |
| 识别 1-2 个问题 | 1-2 分 |
| 识别 0 个或错误问题 | 0 分 |

**扣分项**：
- 只列出问题，不给解释（-1 分）
- 修订建议不符合统计原则（-1 分）

---

## 总体评分标准

### 等级划分

| 等级 | 总分 | 描述 |
|------|------|------|
| A | 90-100 | 优秀：所有基础题正确，进阶/挑战题完成度高 |
| B | 80-89 | 良好：所有基础题正确，部分进阶题完成 |
| C | 70-79 | 中等：大部分基础题正确，有少量错误 |
| D | 60-69 | 及格：基础题完成，但有较多错误 |
| F | < 60 | 不及格：基础题未完成或错误较多 |

### 常见扣分项

- **代码可运行性**：每道题如果代码无法运行，扣 30%-50% 该题分数
- **缺少解释**：只输出数字，不加解释，扣 20%-30% 该题分数
- **统计错误**：混淆概念（如 FWER 和单次 α），扣 30%-50% 该题分数
- **格式问题**：输出格式混乱，扣 10%-20% 该题分数

---

## 测试覆盖说明

本评分标准与 `tests/` 目录下的测试文件对应：

- `test_fwer.py`：测试题目 1 的 FWER 计算函数
- `test_anova.py`：测试题目 2 的 ANOVA 执行
- `test_posthoc.py`：测试题目 3 的 Tukey HSD 执行
- `test_correction.py`：测试题目 4 的校正方法比较
- `test_effect_size.py`：测试题目 6 的 η² 计算

**注意**：
- 测试文件只检查核心函数的正确性
- 解释说明、报告质量等需要人工评分
- 挑战作业和 AI 练习主要由人工评分

---

## 学习目标达成度评估

| 学习目标 | 对应题目 | 评估方式 |
|---------|---------|----------|
| 理解多重比较问题 | 题目 1 | FWER 计算正确性 + 解释说明 |
| 执行 ANOVA | 题目 2 | F 统计量、p 值、前提假设检查 |
| 执行事后比较 | 题目 3 | Tukey HSD 结果 + 显著比较识别 |
| 理解校正方法 | 题目 4 | Bonferroni vs FDR 对比解释 |
| 检查前提假设 | 题目 2、5 | 正态性、方差齐性检查 |
| 计算效应量 | 题目 6 | η² 计算和解释 |
| 审查 AI 结论 | 题目 8 | 问题识别数量 + 审查报告质量 |
| 完整分析流程 | 题目 7 | 报告完整性 + 可读性 + 合理性 |

---

## 教学团队评分指南

**快速评分流程**：

1. 运行测试套件：`pytest chapters/week_07/tests/ -q`
   - 自动评分：题目 1-4、6（约 70 分）
   - 需人工评分：题目 5、7、8（约 30 分）

2. 人工评分重点：
   - 解释说明的质量（是否清晰、准确）
   - 报告的可读性（挑战作业）
   - AI 审查的准确性（AI 练习）

3. 给予反馈：
   - 指出常见的统计错误（如混淆"显著"和"重要"）
   - 鼓励学生多思考"为什么"而不是只记住公式
   - 对优秀作业给予表扬和展示

**常见问题反馈模板**：

- "你正确计算了 FWER，但可以进一步解释：为什么独立性假设很重要？"
- "ANOVA 执行正确，但前提假设检查部分可以更详细（如解释正态性检验的含义）。"
- "Tukey HSD 结果正确，但建议加一句解释：为什么需要校正（控制 FWER）。"
- "报告写得很清楚，但商业建议部分可以更谨慎（避免'证明因果'的表述）。"
