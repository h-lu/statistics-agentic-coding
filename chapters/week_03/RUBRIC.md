# Week 03 评分标准

## 基础练习（60 分）

### 练习 1：缺失值诊断（15 分）

| 评分点 | 分值 | 说明 |
|--------|------|------|
| 缺失值概览表正确 | 4 分 | 包含缺失数量和比例，数值准确 |
| 缺失率计算正确 | 3 分 | 公式正确（`缺失数 / 总行数 * 100`），保留合理小数位 |
| 缺失位置查看 | 2 分 | 能查看缺失位置的索引，判断是否随机 |
| 缺失类型判断 | 4 分 | 能合理判断 MCAR/MAR/MNAR，并给出理由 |
| 分析清晰 | 2 分 | 能解释"缺失率意味着什么"，能说明"高缺失率的影响" |

**加分项**：
- 能用可视化（如 `missingno` 库）展示缺失模式：加 1 分

**扣分项**：
- 缺失率计算错误（没乘 100、没用 round）：扣 2 分
- 只给数字不解释，没有说明"缺失率意味着什么"：扣 2 分
- 直接说"缺失率低所以是 MCAR"，没有考虑缺失模式：扣 2 分

---

### 练习 2：缺失值处理策略（15 分）

| 评分点 | 分值 | 说明 |
|--------|------|------|
| 处理策略合理 | 5 分 | 基于缺失率选择删除或填充，逻辑合理 |
| 对比分析正确 | 4 分 | 能计算处理前后的均值、中位数、样本量 |
| 删除实现正确 | 2 分 | 使用 `dropna(subset=['sex'])` 选择性删除 |
| 填充实现正确 | 2 分 | 如果选择填充，方法合理（中位数/前向填充） |
| 分析清晰 | 2 分 | 能解释"删除 vs 填充"的影响，能说明"策略选择理由" |

**加分项**：
- 能对比多种填充策略（均值 vs 中位数 vs 前向填充）：加 1 分

**扣分项**：
- 直接填充成 0，没有说明理由：扣 3 分
- 只给数字不解释，没有说明"策略意味着什么"：扣 2 分
- 没有对比处理前后的统计量：扣 2 分

---

### 练习 3：异常值检测（15 分）

| 评分点 | 分值 | 说明 |
|--------|------|------|
| IQR 规则实现正确 | 4 分 | 公式正确（Q1 - 1.5×IQR, Q3 + 1.5×IQR） |
| Z-score 实现正确 | 4 分 | 公式正确（`(x - mean) / std`），阈值合理（3） |
| 对比分析清晰 | 3 分 | 能对比两种方法的结果，解释差异原因 |
| 异常值类型判断 | 3 分 | 能判断异常值是"错误"还是"发现" |
| 分析清晰 | 1 分 | 能说明"两种方法的优势"和"适用场景" |

**加分项**：
- 能用可视化（箱线图 + 直方图）展示异常值：加 1 分

**扣分项**：
- IQR 公式错误（例如用 Q75/Q25 而不是差值）：扣 2 分
- Z-score 阈值设置不合理（如 2 或 5）：扣 1 分
- 只给数字不解释，没有说明"检测结果意味着什么"：扣 2 分

---

### 练习 4：数据转换（15 分）

| 评分点 | 分值 | 说明 |
|--------|------|------|
| 标准化实现正确 | 4 分 | 公式正确（`(x - mean) / std`） |
| 归一化实现正确 | 4 分 | 公式正确（`(x - min) / (max - min)`） |
| 对比分析清晰 | 3 分 | 能对比转换前后的统计量，说明变化 |
| 适用场景说明 | 3 分 | 能说明标准化和归一化的适用场景 |
| 分析清晰 | 1 分 | 能解释"转换的目的"，能说明"如何应用新数据" |

**加分项**：
- 能用可视化（直方图）展示转换前后的分布变化：加 1 分

**扣分项**：
- 标准化公式错误（例如除以方差而不是标准差）：扣 2 分
- 归一化公式错误（例如没有减去最小值）：扣 2 分
- 只给数字不解释，没有说明"转换的目的是什么"：扣 2 分

---

## 进阶练习（30 分）

### 练习 5：综合清洗流程（20 分）

| 评分点 | 分值 | 说明 |
|--------|------|------|
| 类封装合理 | 5 分 | `DataCleaner` 类结构清晰，方法划分合理 |
| 流程完整性 | 5 分 | 能从头到尾运行（诊断 → 处理 → 检测 → 转换 → 保存） |
| 清洗日志完整 | 5 分 | 格式正确，包含所有必需部分（缺失、异常、转换） |
| 决策理由充分 | 5 分 | 每个清洗决策都有理由，不是"为了做而做" |

**加分项**：
- 清洗日志包含处理前后的统计量对比：加 1 分
- 有单元测试或使用示例：加 1 分

**扣分项**：
- 代码结构混乱，没有封装成类：扣 3 分
- 清洗日志太简单，没有记录决策理由：扣 3 分
- 代码只 print 不写文件：扣 2 分

---

### 练习 6：特征编码（10 分）

| 评分点 | 分值 | 说明 |
|--------|------|------|
| One-hot 编码正确 | 3 分 | 使用 `pd.get_dummies()` 或 `OneHotEncoder`，设置了 `drop_first` |
| Label 编码正确 | 3 分 | 使用 `LabelEncoder`，有映射表 |
| 编码区别说明 | 2 分 | 能解释 One-hot 和 Label 编码的区别 |
| 适用场景说明 | 2 分 | 能根据变量类型选择合适的编码 |

**加分项**：
- 能对比两种编码对模型的影响（如线性回归）：加 1 分

**扣分项**：
- One-hot 编码没有设置 `drop_first=True`：扣 1 分
- Label 编码没有记录映射表：扣 1 分
- 只给编码结果不解释，没有说明"为什么选这个编码"：扣 1 分

---

## 挑战练习（10 分）

### 练习 7：AI 清洗代码审查（10 分）

| 评分点 | 分值 | 说明 |
|--------|------|------|
| 审查清单完整 | 3 分 | 能识别至少 3 个问题，并打钩确认 |
| 修复代码正确 | 4 分 | 修复后的代码符合本周学到的清洗原则 |
| 审查报告清晰 | 3 分 | 简短说明（300 字以内），能解释为什么要修复 |

**扣分项**：
- 审查清单不完整（少于 3 个问题）：扣 1 分
- 修复后的代码仍有问题（例如填充 0）：扣 2 分
- 审查报告太泛，没有具体解释：扣 1 分

---

## 总分计算

- **基础练习**：60 分（必做）
- **进阶练习**：30 分（选做）
- **挑战练习**：10 分（选做）
- **总分上限**：100 分

**合格线**：60 分（完成基础练习即可）

---

## 通用评分标准（适用于所有练习）

### 代码质量（额外扣分项）

| 问题 | 扣分 |
|------|------|
| 代码无法运行 | 该题 0 分 |
| 变量命名混乱（如 `a`、`b`、`x`、`tmp`） | 扣 1-2 分 |
| 完全没有注释 | 扣 1 分 |
| 硬编码绝对路径 | 扣 2 分 |
| 大量复制粘贴代码（未封装函数） | 扣 2 分 |

### 可复现性（额外扣分项）

| 问题 | 扣分 |
|------|------|
| 清洗后的数据只 print 不保存文件 | 扣 1 分 |
| 未说明数据来源 | 扣 1 分 |
| 随机操作未设置种子 | 扣 1 分 |
| 没有 README 或运行说明 | 扣 1 分 |

### 清洗决策（额外扣分项）

| 问题 | 扣分 |
|------|------|
| 直接填充缺失值为 0，没有理由 | 扣 3 分 |
| 直接删除所有异常值，没有判断类型 | 扣 3 分 |
| 对名义变量用 Label 编码 | 扣 2 分 |
| 没有清洗日志或日志太简单 | 扣 2 分 |

---

## 快速评分清单（供助教参考）

### 练习 1（15 分）
- [ ] 缺失值概览表正确（4 分）
- [ ] 缺失率计算正确（3 分）
- [ ] 缺失位置查看（2 分）
- [ ] 缺失类型判断合理（4 分）
- [ ] 分析清晰（2 分）

### 练习 2（15 分）
- [ ] 处理策略合理（5 分）
- [ ] 对比分析正确（4 分）
- [ ] 删除/填充实现正确（4 分）
- [ ] 分析清晰（2 分）

### 练习 3（15 分）
- [ ] IQR 规则实现正确（4 分）
- [ ] Z-score 实现正确（4 分）
- [ ] 对比分析清晰（3 分）
- [ ] 异常值类型判断（3 分）
- [ ] 分析清晰（1 分）

### 练习 4（15 分）
- [ ] 标准化实现正确（4 分）
- [ ] 归一化实现正确（4 分）
- [ ] 对比分析清晰（3 分）
- [ ] 适用场景说明（3 分）
- [ ] 分析清晰（1 分）

### 练习 5（20 分，选做）
- [ ] 类封装合理（5 分）
- [ ] 流程完整性（5 分）
- [ ] 清洗日志完整（5 分）
- [ ] 决策理由充分（5 分）

### 练习 6（10 分，选做）
- [ ] One-hot 编码正确（3 分）
- [ ] Label 编码正确（3 分）
- [ ] 编码区别说明（2 分）
- [ ] 适用场景说明（2 分）

### 练习 7（10 分，选做）
- [ ] 审查清单完整（3 分）
- [ ] 修复代码正确（4 分）
- [ ] 审查报告清晰（3 分）

---

## 反馈建议模板

对学生作业的反馈可以参考以下格式：

```markdown
## Week 03 作业反馈

**总分**：XX / 100

### 做得好的地方
- 练习 1：能正确诊断缺失值，并判断缺失类型为 MCAR（缺失位置随机分布）。
- 练习 3：IQR 和 Z-score 实现正确，对比分析指出了"IQR 更稳健，Z-score 更敏感"。
- 练习 5：`DataCleaner` 类结构清晰，清洗日志格式完整，每个决策都有理由。

### 需要改进的地方
- 练习 1：只说"缺失率低所以是 MCAR"，没有检查缺失位置。建议加一句："缺失位置在索引中随机分布，没有集中在某些区间，所以是 MCAR。"
- 练习 2：直接填充成 0，没有说明理由。建议改成："sex 是分类变量，不能用 0 填充（会引入虚假类别），应该删除缺失行。"
- 练习 4：只给了转换后的统计量，没有解释"为什么要转换"。建议加一句："标准化让不同尺度的变量可比，归一化适合神经网络等对输入范围敏感的方法。"

### 下周建议
- 继续关注"清洗决策的理由"：不要只是"填了就对了"，要说明"为什么这么填"
- 尝试在清洗日志中加入"处理前后的统计量对比"，让决策更可审计
- 思考：清洗后的数据是否会影响后续分析？比如删除异常值会不会改变结论？
```
