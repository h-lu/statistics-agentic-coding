# Week 13 作业评分标准

## 评分总览

| 层级 | 分值范围 | 核心要求 |
|------|---------|---------|
| **基础层** | 0-60 分 | 因果推断三层级理解、因果图画法、d-分离与后门准则、相关与因果区分 |
| **进阶层** | 0-30 分 | DoWhy 因果效应估计、RCT/A/B 测试设计 |
| **挑战层** | 0-10 分 | 开放性问题：因果推断在 AI 时代的重要性 |
| **总计** | 0-100 分 | 满分 100 分（挑战层为加分项） |

---

## 基础层评分（60 分）

### 任务 1：因果推断三层级（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确区分三层级 | 6 分 | 2 分/层级，共 3 个层级（关联、干预、反事实） |
| 解释为什么回归模型不能回答因果问题 | 5 分 | 3 分：理解混杂问题<br>2 分：区分 P(y\|x) 和 P(y\|do(x)) |
| 举出"相关不等于因果"的例子 | 4 分 | 2 分：例子恰当<br>2 分：解释清晰 |

**扣分项**：
- 认为控制了变量就等于因果效应：-3 分
- 混淆 P(y\|x) 和 P(y\|do(x))：-3 分
- 没有理解"混杂"的概念：-3 分
- 直接复制粘贴示例内容：-5 分

---

### 任务 2：画因果图（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 因果图结构正确 | 5 分 | 3 分：有向无环图（DAG）<br>2 分：箭头方向合理 |
| 正确识别混杂变量 | 4 分 | 4 分：标注了至少 1 个混杂变量 |
| 正确识别碰撞/中介变量 | 3 分 | 2 分：识别了碰撞变量或中介变量<br>1 分：解释了为什么控制/不控制 |
| 解释因果假设和局限性 | 3 分 | 2 分：解释了因果假设<br>1 分：注明了局限性 |

**扣分项**：
- 箭头方向错误：-4 分
- 没有标注混杂变量：-4 分
- 没有解释因果假设：-3 分
- 认为因果图可以从数据中"发现"：-2 分

---

### 任务 3：识别因果路径（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确识别前门路径（因果路径） | 4 分 | 4 分：正确列出了因果路径 |
| 正确识别后门路径（混杂路径） | 4 分 | 4 分：正确列出了混杂路径 |
| 正确应用后门准则 | 4 分 | 2 分：说明了需要控制哪些变量<br>2 分：解释了为什么 |
| 解释为什么不能控制碰撞变量 | 3 分 | 3 分：理解碰撞变量的危害 |

**扣分项**：
- 混淆前门路径和后门路径：-4 分
- 认为"控制越多越好"：-3 分
- 没有理解碰撞变量的危害：-3 分
- 只列路径没有解释：-5 分

---

### 任务 4：区分相关与因果（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确运行回归模型 | 4 分 | 4 分：代码能运行，输出正确 |
| 正确区分"相关性发现"和"因果性结论" | 5 分 | 3 分：明确区分了两者<br>2 分：用词准确 |
| 注明假设和局限性 | 3 分 | 2 分：注明了假设<br>1 分：注明了局限性 |
| 填写"能回答什么，不能回答什么"表格 | 3 分 | 1 分/问题，共 3 个问题 |

**扣分项**：
- 把回归系数直接当成因果效应：-5 分
- 没有注明局限性：-3 分
- 认为控制了变量就等于因果：-3 分
- 只输出代码没有分析：-8 分

---

## 进阶层评分（30 分）

### 任务 5：用 DoWhy 进行因果效应估计（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确使用 DoWhy 库 | 4 分 | 2 分：正确导入和初始化<br>2 分：正确定义因果图 |
| 进行因果识别和估计 | 5 分 | 2 分：Identify 步骤正确<br>3 分：Estimate 步骤正确 |
| 进行敏感性分析 | 4 分 | 2 分：至少一种 Refute 方法<br>2 分：解释了结果 |
| 解释结果和局限性 | 2 分 | 2 分：用业务语言解释结果 |

**加分项**：
- 尝试了不同的估计方法：+3 分
- 进行了多种敏感性分析：+2 分
- 可视化了因果图：+2 分

**扣分项**：
- 代码无法运行：-8 分
- 没有进行敏感性分析：-5 分
- 没有解释结果：-3 分

---

### 任务 6：设计一个 RCT/A/B 测试（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 随机化方案清晰 | 3 分 | 3 分：随机化方法明确 |
| 样本量计算有依据 | 4 分 | 2 分：有假设（效应大小、α、β）<br>2 分：计算合理 |
| 评估指标合理 | 3 分 | 2 分：主要指标合理<br>1 分：次要指标合理 |
| 分析计划完整 | 3 分 | 2 分：分析方法明确<br>1 分：考虑了基线检查 |
| 讨论伦理问题 | 2 分 | 2 分：识别了伦理风险并提出缓解措施 |

**加分项**：
- 使用 Python 计算样本量（如 statsmodels）：+3 分
- 讨论了外部有效性（推广性）：+2 分
- 考虑了实验偏差（如 SUTVA 违反）：+2 分

**扣分项**：
- 随机化方案不清晰：-4 分
- 样本量没有依据：-4 分
- 没有讨论伦理问题：-3 分

---

## 挑战层评分（10 分 + 加分）

### 任务 7：开放性问题——因果推断在 AI 时代的重要性（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 正确理解 AI 的能力边界 | 3 分 | 2 分：AI 擅长什么、不擅长什么<br>1 分：用具体例子说明 |
| 用具体例子说明"相关不等于因果" | 3 分 | 2 分：例子恰当<br>1 分：解释清晰 |
| 用业务语言向非技术读者解释 | 3 分 | 2 分：避免技术术语<br>1 分：语言简洁易懂 |
| 有自己的思考 | 1 分 | 1 分：不是泛泛而谈，有独到见解 |

**加分项**：
- 引用了真实案例（如推荐系统、医学 AI）：+3 分
- 讨论了"因果 AI"的未来：+2 分
- 写得特别精彩，有说服力：+2 分

**扣分项**：
- 泛泛而谈，没有具体例子：-4 分
- 全是技术术语，业务方看不懂：-3 分
- 复制粘贴：-10 分

---

## AI 协作练习（可选，额外 3-5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 审查清单完成 | 2 分 | 2 分：勾选了 AI 生成内容中的问题 |
| 修订版质量 | 3 分 | 3 分：修订版准确、完整，修正了识别出的问题 |

---

## StatLab 任务（额外 10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 因果图质量 | 3 分 | 2 分：因果图清晰<br>1 分：假设说明完整 |
| 相关/因果区分 | 3 分 | 3 分：明确区分了两者 |
| 混杂因素识别 | 2 分 | 1 分/因素，共 2 个因素 |
| "能回答什么，不能回答什么"表格 | 2 分 | 2 分：表格完整 |

---

## 评分维度说明

### 1. 概念理解（35%）
- 理解因果推断的三层级（关联、干预、反事实）
- 理解因果图的三种基本结构（混杂、碰撞、链式）
- 理解 d-分离与后门准则
- 理解 RCT 为什么是"金标准"
- 理解观察研究中的因果推断方法（DID、IV、PSM）

### 2. 实践能力（35%）
- 能画因果图明确假设
- 能识别因果路径和混杂
- 能用 DoWhy 进行因果效应估计
- 能区分"相关性发现"和"因果性结论"
- 能设计 RCT/A/B 测试

### 3. 批判性思维（20%）
- 识别 AI 生成内容的问题
- 反思因果推断的局限性
- 讨论伦理问题

### 4. 表达能力（10%）
- 用业务语言向非技术读者解释
- 用自己的话，不是复制粘贴
- 写作清晰、有条理

---

## 常见错误与扣分标准

| 错误类型 | 扣分 | 说明 |
|---------|------|------|
| 认为控制了变量就等于因果效应 | -5 分 | 混淆 P(y\|x) 和 P(y\|do(x)) |
| 因果图箭头方向错误 | -4 分 | 箭头方向代表因果假设，不能随便画 |
| 认为"控制越多越好" | -4 分 | 控制碰撞变量会引入虚假相关 |
| 没有区分"相关性发现"和"因果性结论" | -5 分 | 这是本周核心概念 |
| 没有注明假设和局限性 | -3 分 | 因果推断必须明确假设 |
| 代码无法运行 | -8 分 | 需确保代码可运行或注明伪代码 |
| 只给代码没有分析 | -20% | 分析和代码同等重要 |
| 复制粘贴示例内容 | -10 分 | 必须用你自己的话 |

---

## 优秀作业示例特征

一份优秀的作业应该：

1. **概念理解部分**：
   - 正确区分了 P(y\|x) 和 P(y\|do(x))
   - 理解了混杂、碰撞、链式三种结构
   - 能用 d-分离和后门准则识别因果路径
   - 理解 RCT 为什么是"金标准"

2. **因果图部分**：
   - 因果图结构正确（有向无环图）
   - 箭头方向合理（基于领域知识）
   - 标注了混杂变量、碰撞变量、中介变量
   - 解释了因果假设和局限性

3. **实践部分**：
   - 正确使用了 DoWhy 库
   - 进行了因果识别、估计和敏感性分析
   - 设计了完整的 RCT/A/B 测试
   - 区分了"相关性发现"和"因果性结论"

4. **批判性思维部分**：
   - 识别了 AI 生成内容的问题
   - 反思了因果推断的局限性
   - 讨论了伦理问题

5. **表达能力**：
   - 用业务语言向非技术读者解释
   - 用自己的话，不是复制粘贴
   - 写作清晰、有条理

---

## 反馈建议模板

在给作业反馈时，可以使用以下模板：

```
【优点】
- （具体表扬，如：正确区分了因果推断的三层级，因果图假设清晰）

【待改进】
- （具体问题，如：因果图的箭头方向有误，应该从原因指向结果）
- （具体建议，如：建议用业务语言解释"为什么不能控制碰撞变量"）

【总分】X/100
```

---

## 测试与验证

作业中的关键检查点应该能被 `tests/` 目录中的测试覆盖：

- `test_causal_hierarchy()`：验证因果推断三层级的理解
- `test_causal_dag()`：验证因果图的结构
- `test_backdoor_criterion()`：验证后门准则的应用
- `test_dowhy_workflow()`：验证 DoWhy 的使用
- `test_rct_design()`：验证 RCT 设计的合理性

评分时可以运行这些测试来验证代码正确性。

---

## 最后提醒

评分的目的是帮助学生学习，而不仅仅是打分。在评分时：
1. 指出具体的错误和改进方向
2. 鼓励学生明确因果假设（画因果图）
3. 认可学生对相关性和因果性区分的思考
4. 强调"因果推断不是发现真相，而是明确假设"

记住 Week 13 的核心目标：**理解因果推断的三层级，学会画因果图明确假设，理解 d-分离与后门准则，理解 RCT 为什么是"金标准"，能够区分"相关性发现"和"因果性结论"，在 StatLab 报告中明确"你能回答什么，不能回答什么"。**

特别提醒：本周的"因果假设明确化"和"相关性与因果性区分"是新增的核心评分维度，与传统的技术正确性同等重要。数据不会告诉你因果，因果假设必须由你来做。
