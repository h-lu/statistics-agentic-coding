# Week 09 评分标准

## 总分分布

| 作业层级 | 题目 | 分值 | 说明 |
|---------|------|------|------|
| 基础作业 | 1-4 题 | 60 分 | 必须完成 |
| 进阶作业 | 5-6 题 | 30 分 | 选做，每题 15 分 |
| 挑战作业 | 7-8 题 | 20 分 | 加分，每题 10 分 |
| AI 练习 | 9 题 | 10 分 | 选做 |

**总分上限**：120 分（100 分满分，20 分加分）

---

## 基础作业评分细则（60 分）

### 第 1 题：简单线性回归拟合（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 模型拟合正确性 | 5 分 | 正确使用 `statsmodels.api.OLS()` 和 `sm.add_constant()` |
| 系数解读准确性 | 5 分 | 正确解读截距和斜率的含义 |
| 模型拟合报告 | 3 分 | 正确报告 R²、F 统计量、p 值 |
| 置信区间 | 2 分 | 报告系数的 95% 置信区间 |

**常见扣分点**：
- 忘记添加截距项（-3 分）
- 混淆 X 和 y 的位置（-2 分）
- 斜率解读错误（如"每增加 1%"）（-3 分）
- 只报告 p 值，不报告置信区间（-1 分）

---

### 第 2 题：R² 和拟合优度解读（12 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 三个模型 R² 计算 | 4 分 | 三个模型的 R² 计算正确 |
| 模型比较 | 3 分 | 正确找出 R² 最高的模型 |
| 思考题回答 | 5 分 | 正确理解"高 R² 不等于好模型"，给出合理解释 |

**常见扣分点**：
- 只比较 R² 数值，不考虑实际意义（-2 分）
- 认为高 R² 就是好模型（-3 分）
- 混淆"相关"和"因果"（-2 分）

---

### 第 3 题：回归假设检查（18 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 残差图 | 4 分 | 正确绘制残差 vs 拟合值图，带 LOWESS 线 |
| QQ 图 | 3 分 | 正确绘制 QQ 图 |
| 正态性检验 | 3 分 | 正确执行 Shapiro-Wilk 检验并解读 |
| 等方差检验 | 3 分 | 正确执行 Breusch-Pagan 检验并解读 |
| Durbin-Watson 统计量 | 2 分 | 正确报告并解读 |
| 假设总结 | 3 分 | 对四个假设给出清晰的满足/不满足判断 |

**常见扣分点**：
- 只画图不做检验（或反之）（-3 分）
- 混淆"不能拒绝"和"证明成立"（-2 分）
- 图表缺少标题或轴标签（-1 分）
- 没有给出总体结论（-2 分）

---

### 第 4 题：模型诊断（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| Cook's 距离计算 | 4 分 | 正确计算 Cook's 距离和阈值 |
| Cook's 距离图 | 3 分 | 正确绘制，标注阈值 |
| 高影响点识别 | 3 分 | 正确列出高影响点索引 |
| 删除前后比较 | 3 分 | 正确比较系数和 R² 的变化 |
| 处理建议合理性 | 2 分 | 建议合理（不是盲目删除） |

**常见扣分点**：
- 阈值公式错误（如用 1/n 而非 4/n）（-2 分）
- 看到高影响点就删除，不检查原因（-3 分）
- 不报告删除前后的比较（-2 分）
- 为了提高 R² 而删除点（-3 分，这是数据造假）

---

## 进阶作业评分细则（30 分）

### 第 5 题：多元回归（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 两个模型拟合 | 4 分 | 正确拟合简单回归和多元回归 |
| 系数比较 | 4 分 | 正确比较体重系数在两个模型中的变化 |
| "控制其他变量后"解释 | 7 分 | 清楚解释多元回归系数的含义和变化原因 |

**常见扣分点**：
- 不理解"控制其他变量后"的含义（-5 分）
- 只报告数字，不解释差异原因（-3 分）
- 混淆简单回归和多元回归系数（-2 分）

---

### 第 6 题：多重共线性检测（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| VIF 计算 | 5 分 | 正确计算所有自变量的 VIF |
| 诊断判断 | 3 分 | 正确判断哪些变量存在多重共线性 |
| 相关矩阵热图 | 3 分 | 正确绘制相关矩阵热图 |
| 处理建议 | 4 分 | 建议合理（删除变量/PCA/正则化） |

**常见扣分点**：
- 忘记加截距项（VIF 计算错误）（-3 分）
- 混淆相关系数和 VIF（-2 分）
- VIF 稍高（5-7）就恐慌（-1 分）
- 处理建议不合理（-2 分）

---

## 挑战作业评分细则（20 分）

### 第 7 题：稳健回归（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 数据生成 | 2 分 | 正确生成含异常值的模拟数据 |
| OLS 和 RLM 拟合 | 3 分 | 正确拟合两种模型 |
| 结果比较 | 3 分 | 正确比较系数、残差图 |
| 稳健回归优势解释 | 2 分 | 清楚解释稳健回归的原理和优势 |

**常见扣分点**：
- 异常值不够明显（-1 分）
- 只比较系数，不画残差图（-2 分）
- 不解释稳健回归原理（-1 分）

---

### 第 8 题：异方差处理（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 异方差确认 | 2 分 | 正确执行 Breusch-Pagan 检验 |
| HC3 标准误计算 | 3 分 | 正确使用 `get_robustcov_results(cov_type='HC3')` |
| 标准误比较 | 3 分 | 正确比较 OLS 和 HC3 标准误、置信区间 |
| HC3 原理解释 | 2 分 | 清楚解释 HC3 如何解决异方差问题 |

**常见扣分点**：
- 混淆 HC3 和 Bootstrap（-1 分）
- 不画残差图（-1 分）
- 认为 HC3 可以"修复"异方差（它只修正标准误）（-2 分）

---

## AI 协作练习评分细则（10 分）

### 第 9 题：审查 AI 报告（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 问题识别准确性 | 4 分 | 识别出 3-5 个真实问题 |
| 审查报告说服力 | 3 分 | 报告逻辑清晰，有理有据 |
| 修订建议合理性 | 2 分 | 建议可行，符合统计原则 |
| 代码验证（可选） | 1 分 | 用 Python 验证了修订建议 |

**评分示例**：

| 识别问题数量 | 得分 |
|-------------|------|
| 识别 5 个问题 | 4 分 |
| 识别 3-4 个问题 | 3 分 |
| 识别 1-2 个问题 | 1-2 分 |
| 识别 0 个或错误问题 | 0 分 |

**常见扣分点**：
- 只列出问题，不给解释（-1 分）
- 修订建议不符合统计原则（-1 分）
- 审查报告逻辑混乱（-1 分）

---

## 通用评分标准

### 代码质量（所有适用题目）

| 标准 | 说明 |
|------|------|
| 可运行性 | 代码必须能运行，不能有语法错误或导入错误 |
| 可读性 | 变量名清晰，有适当注释，代码格式规范 |
| 可复现性 | 随机操作固定种子（如适用），结果可复现 |

### 可视化质量

| 标准 | 说明 |
|------|------|
| 完整性 | 图表包含标题、轴标签、图例（如适用） |
| 清晰性 | 图表易读，信息丰富 |
| 正确性 | 图表类型选择正确，数据映射准确 |

### 报告写作质量

| 标准 | 说明 |
|------|------|
| 完整性 | 回答所有问题，不遗漏 |
| 准确性 | 统计概念和数值计算正确 |
| 清晰性 | 用自己的话解释，不是复制粘贴 |

---

## 等级划分

| 总分 | 等级 | 描述 |
|------|------|------|
| 90-100+ | 优秀 | 概念理解深入，代码质量高，报告专业 |
| 80-89 | 良好 | 掌握核心概念，完成基本要求 |
| 70-79 | 中等 | 基本理解，但有明显疏漏 |
| 60-69 | 及格 | 勉强达到要求，需要加强练习 |
| < 60 | 不及格 | 核心概念未掌握 |

---

## 验证测试

基础作业的第 1、3、4 题有对应的自动化测试。运行以下命令验证：

```bash
python3 -m pytest chapters/week_09/tests/test_assignment.py -v
```

测试将检查：
- 回归系数计算的数值准确性（容差 ±0.01）
- 假设检验的执行正确性
- Cook's 距离的计算正确性

**注意**：测试只验证数值结果，不评估代码质量、可视化和解释。这些部分由人工评分。

---

## 学习目标达成度评估

| 学习目标 | 对应题目 | 评估方式 |
|---------|---------|----------|
| 拟合简单线性回归 | 题目 1 | 系数计算正确性 + 解读准确性 |
| 解读 R² | 题目 2 | R² 计算正确性 + 思考题回答 |
| 检查 LINE 假设 | 题目 3 | 残差图、QQ 图、假设检验执行 |
| 诊断高影响点 | 题目 4 | Cook's 距离计算 + 处理建议 |
| 理解多元回归 | 题目 5 | "控制其他变量后"解释 |
| 检测多重共线性 | 题目 6 | VIF 计算 + 处理建议 |
| 稳健回归 | 题目 7 | OLS vs RLM 比较 |
| 异方差处理 | 题目 8 | HC3 vs OLS 比较 |
| 审查 AI 结论 | 题目 9 | 问题识别 + 审查报告 |

---

## 教学团队评分指南

**快速评分流程**：

1. 运行测试套件：`pytest chapters/week_09/tests/ -q`
   - 自动评分：题目 1、3、4（约 35 分）
   - 需人工评分：题目 2、5-9（约 65 分）

2. 人工评分重点：
   - 解释说明的质量（是否清晰、准确）
   - 可视化的质量（图表是否完整、清晰）
   - AI 审查的准确性（AI 练习）
   - "控制其他变量后"的理解（多元回归）

3. 给予反馈：
   - 指出常见的统计错误（如"高 R² = 好模型"）
   - 鼓励学生重视残差诊断（残差图是底线）
   - 对优秀作业给予表扬和展示

**常见问题反馈模板**：

- "回归拟合正确，但建议检查残差图：是否有明显的模式或漏斗形状？"
- "R² 解读正确，但要注意：高 R² 不等于假设满足，残差诊断很重要。"
- "假设检查做得很完整，建议加一句总体结论：哪些假设满足，哪些不满足？"
- "Cook's 距离计算正确，但不建议为了提高 R² 而删除点。应该先检查是否为录入错误。"
- "多元回归系数解读很清楚！'控制其他变量后'这个概念理解正确。"
- "AI 审查报告写得很全面，识别了残差图、假设检查、置信区间等关键缺失信息。"
